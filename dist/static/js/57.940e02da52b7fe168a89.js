webpackJsonp([57],{1114:function(e,t,s){"use strict";var i=s(181),o=s(180),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};t.a={name:"service",props:["id"],components:{ContentHeader:i.a,cSwitch:o.a},data:function(){return{name:"Service 상세",originItems:{},items:{serviceName:"",companyName:"",serviceTypeId:null,serviceDomainList:[{domainPurposeCode:null,sslYn:!0,domainPortNumber:"",hashingType:null}],cnameUseYn:!1,cnameDomainName:"",sslCertUseYn:!1,sslCert:"",sslCertKey:"",sslCertExpireDate:"",serviceUseYn:!1,modifyHistReason:"",processStateCode:null,processId:null},code:{serviceTypeId:null,domainProtocolCode:[],domainPurposeCode:[],hashingType:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},serviceItems:{command:"ADD",serviceTypeId:null,modifyHistReason:"서비스 타입 수정"},serviceUseYnItems:{serviceUseYn:null,modifyHistReason:"서비스 사용 여부 변경"},isLoad:{serviceTypeId:!0,hashingType:!0,domainPurposeCode:!0},isEdit:!1,isModalHistory:!1,isModalServiceType:!1,isModalUseYn:!1,modal:{open:!1,type:"done",msg:"",action:function(){}},inValidServiceForm:!1,inValidRemoveServiceType:!1,inValidUseForm:!1,inValidForm:!1}},computed:{serviceTypeId:{get:function(){var e=this;return this.code.serviceTypeId.find(function(t){return t.serviceTypeId===e.items.serviceTypeId})||null},set:function(e){this.items.serviceTypeId=null!==e?e.serviceTypeId:null}},isProcessComplete:function(){return null===this.items.processId||null!==this.items.processStateCode&&""!==this.items.processStateCode&&"PROCESS_STATE_02"===this.items.processStateCode},feedback:function(){return{serviceTypeId:this.inValidRemoveServiceId?"사용 설정된 PoP이 존재하여 삭제할 수 없습니다. 삭제 후, 다시 시도해주세요.":0===this.serviceItems.serviceTypeId.length?"변경된 사항이 없습니다.":0===this.items.serviceTypeId.length?this.$valid.msg.select:""}},fields:function(){var e={domainPurposeCode:{label:"",class:"text-left"},sslYn:{label:"*Domain",class:"text-left"},domainPortNumber:{label:"Port",class:"text-left"},hashingType:{label:"Hashing Type",class:"text-left"}};return this.isEdit?a({},e,{action:{label:""}}):e}},created:function(){var e=this,t=this.$route.query.histories;this.detailUrl=void 0!==t?"/services/"+this.id+"/histories/"+t:"/services/"+this.id,t&&document.querySelector("body.app").classList.add("history-mode"),this.$https.get("/serviceTypeFilterList",{}).then(function(t){e.isLoad.serviceTypeId=!1,e.code.serviceTypeId=t.data.items}),this.$https.get("/system/commonCode",{q:{groupCode:"DOMAIN_PUPOSE"}}).then(function(t){e.isLoad.domainPurposeCode=!1,e.code.domainPurposeCode=t.data.items}),this.$https.get("/system/commonCode",{q:{groupCode:"HASHING_TYPE"}}).then(function(t){e.isLoad.hashingType=!1,e.code.hashingType=t.data.items});var s=function(t){return e.isLoad.domainHashingTypeCode=!1,e.code.domainHashingTypeCode=t.data.items,e.$https.get(e.detailUrl)};(function(){return e.$https.get("/system/commonCode",{q:{groupCode:"SERVICE_TYPE"}})})().then(s).then(this.fetchDetail)},methods:{onEdit:function(){this.isEdit=!0;this.items.serviceDomainList,this.code.domainPurposeCode[0],this.code.hashingType[0]},onView:function(){this.isEdit=!1,this.items=JSON.parse(JSON.stringify(this.originItems)),this.setDomainPurposeCodes()},fetchDetail:function(e){this.items=e.data.items,this.originItems=JSON.parse(JSON.stringify(this.items)),this.setDomainPurposeCodes(),console.log(this.items)},onSubmit:function(){var e=this,t=a({},this.items,{serviceDomainList:this.items.serviceDomainList.length?this.items.serviceDomainList.map(function(e){var t=e.domainPurposeCode,s=e.sslYn,i=e.domainPortNumber,o=e.hashingType;return{domainPurposeCode:t.code,sslYn:s,domainPortNumber:i,hashingType:o.code}}):[]});this.validate(t)&&this.$https.put("/services/"+this.id,t).then(function(t){e.$router.go(e.$router.currentRoute)}).catch(function(e){console.log(e)})},onDelete:function(){this.modal={open:!0,type:"error",msg:"정말로 삭제하시겠습니까?",action:this.onDeleteData}},onDeleteData:function(){var e=this;this.$https.delete("/services/"+this.id).then(function(t){e.$router.push({name:"Service 관리"})}).catch(function(e){console.log(e)})},onSubmitUseYn:function(){var e=this;this.serviceUseYnItems.serviceUseYn=this.items.serviceUseYnItems;var t=this.$valid.all(this.serviceUseYnItems);this.inValidUseForm=!t,t&&this.$https.put("/services/"+this.id+"/use",this.serviceUseYnItems).then(function(){e.isModalUseYn=!1}).catch(function(t){console.log(t),e.onResetUseYn()})},onResetUseYn:function(){this.isModalUseYn=!1,this.items.serviceUseYn=this.originItems.serviceUseYn,this.serviceUseYnItems={serviceUseYn:this.items.serviceUseYn,modifyHistReason:"서비스 사용 여부 변경"}},validate:function(e){var t=e.cnameDomainName,s=e.sslCert,i=e.sslCertKey,o=e.sslCertExpireDate,n=e.modifyHistReason,r={modifyHistReason:n};this.items.cnameUseYn&&(r=a({},r,{cnameDomainName:t})),this.items.sslCertUseYn&&(r=a({},r,{sslCert:s,sslCertKey:i,sslCertExpireDate:o}));var l=this.$valid.all(r);return this.inValidForm=!l,l},getHistoryLink:function(e){return"#/service/service/"+this.id+"?histories="+e},showHistory:function(){var e=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/services/"+this.id+"/histories").then(function(t){e.history.items=t.data.items})},setDomainPurposeCodes:function(){var e=this,t=this.items.serviceDomainList;this.items.serviceDomainList=function(t){return!t.length||t.length&&(null===t[0].name||""===t[0].name)?[]:t.map(function(t){var s=t.domainPurposeCode,i=t.sslYn,o=t.domainPortNumber,a=t.hashingType;return{domainPurposeCode:e.code.domainPurposeCode.find(function(e){return e.code===s}),sslYn:i,domainPortNumber:o,hashingType:e.code.hashingType.find(function(e){return e.code===a})}})}(t)},onAddRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.items[e].push(Object.assign({},{domainPurposeCode:this.code.domainPurposeCode[0],sslYn:!0,domainPortNumber:"",hashingType:this.code.hashingType[0]},t))},onDelRow:function(e,t){this.items[e].splice(t,1)}}}},1115:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animated fadeIn"},[s("content-header",{attrs:{title:e.items.serviceName,name:e.name}}),e._v(" "),s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),e._v("\n      기본정보\n    ")])],1),e._v(" "),s("b-collapse",{attrs:{id:"formDefault",visible:""}},[s("b-form",{staticClass:"formView",attrs:{validated:e.inValidForm,novalidate:""}},[s("b-form-fieldset",{attrs:{label:"Company",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.companyName,type:"text",plaintext:""}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"Service Name",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.serviceName,plaintext:"",type:"text"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Service Type"),s("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),e.isEdit?s("multiselect",{attrs:{showLabels:!1,searchable:!1,options:e.code.serviceTypeId,loading:e.isLoad.serviceTypeId,label:"serviceTypeName","track-by":"serviceTypeId",placeholder:"Select service type"},model:{value:e.serviceTypeId,callback:function(t){e.serviceTypeId=t},expression:"serviceTypeId"}}):s("b-form-input",{attrs:{value:e.items.serviceTypeName,plaintext:"",type:"text"}})],2),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Domain"),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),s("b-form-input",{attrs:{type:"text",placeholder:"Enter API name",plaintext:!e.isEdit,required:""},model:{value:e.items.serviceDomainName,callback:function(t){e.$set(e.items,"serviceDomainName",t)},expression:"items.serviceDomainName"}})],2),e._v(" "),s("b-form-fieldset",{attrs:{horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          서비스 유형"),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),s("b-table",{staticClass:"sub",attrs:{"show-empty":"",items:e.items.serviceDomainList,fields:e.fields},scopedSlots:e._u([{key:"domainPurposeCode",fn:function(t){return[e.isEdit?s("multiselect",{staticClass:"noEmpty",attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.domainPurposeCode,loading:e.isLoad.domainPurposeCode},model:{value:t.item.domainPurposeCode,callback:function(s){e.$set(t.item,"domainPurposeCode",s)},expression:"row.item.domainPurposeCode"}}):e._e(),e._v(" "),e.isEdit?e._e():s("span",{staticClass:"form-text-alone"},[e._v(e._s(t.item.domainPurposeCode.codeName))])]}},{key:"sslYn",fn:function(t){return[e.isEdit?s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"https://",off:"http://"},model:{value:t.item.sslYn,callback:function(s){e.$set(t.item,"sslYn",s)},expression:"row.item.sslYn"}}):e._e(),e._v(" "),e.isEdit?s("label",[e._v("[uuid]."+e._s(e.items.serviceDomainName))]):s("label",[e._v("  "+e._s(t.item.sslYn?"https://":"http://")+"[uuid]."+e._s(e.items.serviceDomainName))])]}},{key:"domainPortNumber",fn:function(t){return[e.isEdit?s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.item.domainPortNumber,callback:function(s){e.$set(t.item,"domainPortNumber",s)},expression:"row.item.domainPortNumber"}}):s("span",{staticClass:"form-text-alone"},[e._v(e._s(t.item.domainPortNumber))]),e._v(" "),s("div",{staticClass:"invalid-tooltip"},[e._v(e._s(e.$valid.msg.require))])]}},{key:"hashingType",fn:function(t){return[e.isEdit?s("multiselect",{staticClass:"noEmpty",attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.hashingType,loading:e.isLoad.hashingType},model:{value:t.item.hashingType,callback:function(s){e.$set(t.item,"hashingType",s)},expression:"row.item.hashingType"}}):e._e(),e._v(" "),e.isEdit?e._e():s("span",{staticClass:"form-text-alone"},[e._v(e._s(t.item.hashingType.codeName))])]}},{key:"action",fn:function(t){return[s("span",{staticClass:"ico"},[0===t.index?s("button",{attrs:{type:"button"},on:{click:function(t){e.onAddRow("serviceDomainList")}}},[s("i",{staticClass:"fa fa-plus-circle"})]):e._e(),e._v(" "),t.index>0?s("button",{attrs:{type:"button"},on:{click:function(s){e.onDelRow("serviceDomainList",t.index)}}},[s("i",{staticClass:"fa fa-times-circle"})]):e._e()])]}}])})],2),e._v(" "),s("b-form-fieldset",{attrs:{label:"사용여부",horizontal:!0}},[s("span",{staticClass:"badge",class:{primary:e.items.serviceUseYn}},[e._v(e._s(e.items.serviceUseYn?"사용":"미사용")+"\n        ")]),e._v(" "),e.isEdit?e._e():s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"in-table-icon",title:"Service 사용여부 수정"},on:{click:function(t){e.isModalUseYn=!e.isModalUseYn}}},[s("i",{staticClass:"fa fa-pencil"})])],1),e._v(" "),e.isEdit?s("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:6,required:""},model:{value:e.items.modifyHistReason,callback:function(t){e.$set(e.items,"modifyHistReason",t)},expression:"items.modifyHistReason"}})],1):e._e()],1)],1),e._v(" "),e.isEdit?e._e():s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formHistory",modifiers:{formHistory:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),e._v("\n      처리이력\n    ")])],1),e._v(" "),e.isEdit?e._e():s("b-collapse",{attrs:{id:"formHistory",visible:""}},[s("b-form",{staticClass:"formView"},[s("div",{staticClass:"form-row"},[s("b-form-fieldset",{attrs:{label:"등록일시",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.createDateTime,plaintext:"",type:"text"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"등록자",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.createId,plaintext:"",type:"text"}})],1)],1),e._v(" "),s("div",{staticClass:"form-row"},[s("b-form-fieldset",{attrs:{label:"수정일시",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.modifyDateTime,plaintext:"",type:"text"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"수정자",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.modifyId,plaintext:"",type:"text"}})],1)],1),e._v(" "),null!==e.items.processId?s("b-form-fieldset",{attrs:{label:"배포상태",horizontal:!0}},[s("input",{staticClass:"form-control-plaintext",staticStyle:{width:"50px"},attrs:{type:"text",readonly:"readonly"},domProps:{value:e.items.processStateCodeName}}),e._v(" "),s("a",{staticClass:"btn btn-in-table",attrs:{href:"#/workflow/service/"+e.items.processId,target:"_blank"}},[e._v(e._s(e.items.processId))])]):e._e()],1)],1),e._v(" "),e.isEdit?s("div",{staticClass:"page-btn"},[s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onView}},[e._v("취소")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmit}},[e._v("저장")])],1):s("div",{staticClass:"page-btn"},[e.isProcessComplete?s("span",[s("b-button",{staticClass:"float-left",attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onDelete}},[e._v("삭제")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.showHistory}},[e._v("이력관리")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Service 관리"}}},[e._v("목록")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onEdit}},[e._v("수정")])],1):s("span",[s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.showHistory}},[e._v("이력관리")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Service 관리"}}},[e._v("목록")])],1)]),e._v(" "),s("b-modal",{attrs:{size:"lg"},on:{hide:e.onResetUseYn},model:{value:e.isModalUseYn,callback:function(t){e.isModalUseYn=t},expression:"isModalUseYn"}},[s("template",{slot:"modal-title"},[e._v("\n      "+e._s(e.items.serviceName)+"\n      "),s("small",[e._v(" > 사용 여부")])]),e._v(" "),s("b-form",{staticClass:"formView",attrs:{validated:e.inValidUseForm,novalidate:""}},[s("b-form-fieldset",{attrs:{label:"사용 여부",horizontal:!0}},[s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.items.serviceUseYn,callback:function(t){e.$set(e.items,"serviceUseYn",t)},expression:"items.serviceUseYn"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:6,required:""},model:{value:e.serviceUseYnItems.modifyHistReason,callback:function(t){e.$set(e.serviceUseYnItems,"modifyHistReason",t)},expression:"serviceUseYnItems.modifyHistReason"}})],1)],1),e._v(" "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmitUseYn}},[e._v("저장")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onResetUseYn}},[e._v("취소")])],1)],2),e._v(" "),s("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:e.isModalHistory,callback:function(t){e.isModalHistory=t},expression:"isModalHistory"}},[s("section",{staticClass:"board"},[s("b-table",{attrs:{hover:"","show-empty":"",items:e.history.items,fields:e.history.fields,"current-page":e.history.pageInfo.page,"per-page":e.history.pageInfo.size},scopedSlots:e._u([{key:"histMgmtId",fn:function(t){return[s("a",{attrs:{href:e.getHistoryLink(t.value),target:"_blank"}},[e._v("보기")])]}}])})],1),e._v(" "),s("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":e.history.pageInfo.totalCount,"per-page":e.history.pageInfo.size},model:{value:e.history.pageInfo.page,callback:function(t){e.$set(e.history.pageInfo,"page",t)},expression:"history.pageInfo.page"}}),e._v(" "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(t){e.isModalHistory=!1}}},[e._v("확인")])],1)],1),e._v(" "),s("b-modal",{class:"modal-"+e.modal.type,attrs:{title:"Message",size:"sm"},model:{value:e.modal.open,callback:function(t){e.$set(e.modal,"open",t)},expression:"modal.open"}},[s("div",{staticClass:"d-block text-center"},[s("p",[e._v(e._s(e.modal.msg))])]),e._v(" "),s("div",{staticClass:"mx-auto",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.modal.action}},[e._v("확인")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(t){e.modal.open=!1}}},[e._v("취소")])],1)])],1)},o=[],a={render:i,staticRenderFns:o};t.a=a},641:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(1114),o=s(1115),a=s(15),n=a(i.a,o.a,null,null,null);t.default=n.exports}});