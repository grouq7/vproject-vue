webpackJsonp([75],{1051:function(e,t,i){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var s=i(181),a=i(180),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e};t.a={name:"edgeDetailBase",props:["id"],components:{ContentHeader:s.a,cSwitch:a.a},data:function(){return{name:"Edge 상세",originItems:{},items:{edgeId:null,ip:null,hostName:null,edgeRelayYn:null,edgeRelayName:null,serviceTypeCode:[],edgeDomainCode:[],edgeDomainName:null,edgeUseYn:null,modifyHistReason:"Edge 수정",popIdArray:[],popCtprvnCode:null,popSigCode:null,edgeAddress:"",bandwidth:0,geoCode:null,geoCodeName:""},serviceItems:{command:"ADD",serviceTypeCode:[],modifyHistReason:"서비스 타입 수정"},code:{serviceTypeCode:[],serviceTypeCodeAll:[],popIdArray:[],popIdAll:[],popCtprvnCode:[],popSigCode:[],geoCode:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},isLoad:{popId:!0,serviceTypeCode:!0,popCtprvnCode:!0,popSigCode:!0,geoCode:!0},isEdit:!1,isModalHistory:!1,isModalServiceType:!1,isHistory:!1,modal:{open:!1,type:"done",msg:"",action:function(){}},inValidServiceForm:!1,inValidRemoveServiceType:!1,inValidForm:!1}},computed:{serviceTypeCode:{get:function(){var e=this;return this.items.serviceTypeCode.length>0?this.items.serviceTypeCode.map(function(t){return e.code.serviceTypeCodeAll.find(function(e){return e.serviceTypeAndProtocolCode===t})}):[]},set:function(e){this.items.serviceTypeCode=e.length>0?e.map(function(e){return e.serviceTypeAndProtocolCode}):[]}},popIdArray:{get:function(){var e=this;return null!==this.items.popIdArray&&this.items.popIdArray.length>0?this.items.popIdArray.map(function(t){return e.code.popIdAll.find(function(e){return e.popId===t})}):[]},set:function(e){this.items.popIdArray=e.length>0?e.map(function(e){return e.popId}):[]}},popCtprvnCode:{get:function(){var e=this;return this.code.popCtprvnCode.find(function(t){return t.addressCode===e.items.popCtprvnCode})||null},set:function(e){this.items.popCtprvnCode=null!==e?e.addressCode:null}},popSigCode:{get:function(){var e=this;return this.code.popSigCode.find(function(t){return t.addressCode===e.items.popSigCode})||null},set:function(e){this.items.popSigCode=null!==e?e.addressCode:null}},geoCode:{get:function(){var e=this;return this.code.geoCode.find(function(t){return t.code===e.items.geoCode})||null},set:function(e){this.items.geoCode=null!==e?e.code:null}},isEditableServiceType:function(){return!this.isEdit},valid:function(){return{popCtprvnCode:null!==this.items.popCtprvnCode,popSigCode:null!==this.items.popSigCode,geoCode:null!==this.items.geoCode,serviceTypeCode:this.items.serviceTypeCode.length&&this.serviceItems.serviceTypeCode.length&&!this.inValidRemoveServiceType}},feedback:function(){return{serviceTypeCode:this.inValidRemoveServiceType?"사용 설정된 PoP이 존재하여 삭제할 수 없습니다. 삭제 후, 다시 시도해주세요.":0===this.serviceItems.serviceTypeCode.length?"변경된 사항이 없습니다.":0===this.items.serviceTypeCode.length?this.$valid.msg.select:""}}},created:function(){var e=this,t=this.$route.query.histories,i=void 0!==t?"/edges/"+this.id+"/histories/"+t:"/edges/"+this.id;t&&(document.querySelector("body.app").classList.add("history-mode"),this.isHistory=!0),this.fetchAddress(),this.$https.get("/system/commonCode",{q:{groupCode:"GEO"}}).then(function(t){e.isLoad.geoCode=!1,e.code.geoCode=t.data.items});var o=function(t){return e.isLoad.serviceTypeCode=!1,e.code.serviceTypeCodeAll=t.data.items,e.code.serviceTypeCode=t.data.items,e.$https.get("/pops")},s=function(t){return e.isLoad.popId=!1,e.code.popIdAll=t.data.items,e.$https.get(i)};(function(){return e.$https.get("/edges/serviceTypeAndProtocol")})().then(o).then(s).then(this.fetchDetail)},methods:{fetchDetail:function(e){this.items=r({},this.items,e.data.items),this.originItems=JSON.parse(JSON.stringify(this.items)),""!==this.items.popCtprvnCode&&this.fetchAddress(this.items.popCtprvnCode)},onFirstAddress:function(e){this.fetchAddress(e.addressCode)},fetchAddress:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$https.get("/pops/address",{firstDepth:t}).then(function(i){""===t?(e.isLoad.popCtprvnCode=!1,e.code.popCtprvnCode=i.data.items):(e.isLoad.popSigCode=!1,e.code.popSigCode=i.data.items)})},onEdit:function(){this.isEdit=!0},onView:function(){this.isEdit=!1,this.items=JSON.parse(JSON.stringify(this.originItems))},onSubmit:function(){var e=this,t=this.items,i=t.popCtprvnCode,o=t.popSigCode,s=t.bandwidth,a=t.edgeUseYn,r=t.modifyHistReason,n=t.geoCode,l=this.$valid.all({popCtprvnCode:i,popSigCode:o,bandwidth:s,edgeUseYn:a,modifyHistReason:r,geoCode:n});this.inValidForm=!l,l&&this.$https.put("/edges/"+this.id,{popCtprvnCode:i,popSigCode:o,bandwidth:s,edgeUseYn:a,modifyHistReason:r,geoCode:n}).then(function(){e.$router.go(e.$router.currentRoute)}).catch(function(e){console.log(e)})},onDelete:function(){this.modal={open:!0,type:"error",msg:"정말로 삭제하시겠습니까?",action:this.onDeleteData}},onDeleteData:function(){var e=this;this.$https.delete("/edges/"+this.id).then(function(){e.$router.push({name:"Edge 관리"})}).catch(function(e){console.log(e)})},onSubmitService:function(){var e=this,t=this.$valid.all(this.serviceItems)&&this.items.serviceTypeCode.length>0;this.inValidServiceForm=!t,t&&this.$https.put("/edges/"+this.id+"/types",this.serviceItems).then(function(){e.$router.go(e.$router.currentRoute)}).catch(function(t){console.log(t),e.onResetService()})},onResetService:function(){this.isModalServiceType=!1,this.resetServiceType(),this.serviceItems={command:"ADD",serviceTypeCode:[],modifyHistReason:"서비스 타입 수정"}},resetServiceType:function(){this.serviceItems.serviceTypeCode=[],this.items.serviceTypeCode=[].concat(o(this.originItems.serviceTypeCode))},getHistoryLink:function(e){return"#/configuration/edges/edge/"+this.id+"?histories="+e},showHistory:function(){var e=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/edges/"+this.id+"/histories").then(function(t){e.history.items=t.data.items})},onSelectType:function(e){this.serviceItems.serviceTypeCode.push(e.serviceTypeAndProtocolCode)},onRemoveType:function(e){var t=this;this.$https.get("services/"+this.id+"/types",{serviceTypeAndProtocolCode:e.serviceTypeAndProtocolCode}).then(function(i){t.inValidRemoveServiceType=!("Success"===i.data.result),t.inValidRemoveServiceType?t.items.serviceTypeCode=[].concat(o(t.originItems.serviceTypeCode)):t.serviceItems.serviceTypeCode.push(e.serviceTypeAndProtocolCode)})}}}},1052:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"animated fadeIn"},[i("content-header",{attrs:{title:e.items.hostName,small:e.items.ip,name:e.name}}),e._v(" "),i("div",{staticClass:"collapse-title"},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[i("i",{staticClass:"fa"}),e._v("\n      기본정보\n    ")])],1),e._v(" "),i("b-collapse",{attrs:{id:"formDefault",visible:""}},[i("b-form",{staticClass:"formView",attrs:{validated:e.inValidForm,novalidate:""}},[i("b-form-fieldset",{attrs:{label:"Edge ID",horizontal:!0}},[i("b-form-input",{attrs:{type:"text",plaintext:""},model:{value:e.items.edgeId,callback:function(t){e.$set(e.items,"edgeId",t)},expression:"items.edgeId"}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"IP",horizontal:!0}},[i("b-form-input",{attrs:{type:"text",plaintext:""},model:{value:e.items.ip,callback:function(t){e.$set(e.items,"ip",t)},expression:"items.ip"}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"Host Name",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.hostName,type:"text",plaintext:""}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"PoP",horizontal:!0}},[i("div",{staticClass:"badge-list"},e._l(e.popIdArray,function(t){return i("span",{staticClass:"badge sm"},[e._v("\n            "+e._s(t.popName)+"\n          ")])}))]),e._v(" "),i("b-form-fieldset",{attrs:{label:"구분",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.edgeRelayName,type:"text",plaintext:""}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"Service Type / Protocol",horizontal:!0}},[i("div",{staticClass:"badge-list"},e._l(e.serviceTypeCode,function(t){return i("span",{staticClass:"badge sm"},[e._v("\n            "+e._s(t.serviceTypeName)+"\n          ")])})),e._v(" "),e.isEditableServiceType?i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"in-table-icon",title:"Service Type 수정"},on:{click:function(t){e.isModalServiceType=!e.isModalServiceType}}},[i("i",{staticClass:"fa fa-pencil"})]):e._e()],1),e._v(" "),e.isEdit?i("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.select,horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          지역"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("multiselect",{class:{invalid:!e.valid.geoCode},staticStyle:{width:"156px"},attrs:{showLabels:!1,searchable:!1,options:e.code.geoCode,loading:e.isLoad.geoCode,"track-by":"code",label:"codeName",placeholder:"선택"},model:{value:e.geoCode,callback:function(t){e.geoCode=t},expression:"geoCode"}})],2):i("b-form-fieldset",{attrs:{label:"지역",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.geoCodeName,type:"text",plaintext:""}})],1),e._v(" "),e.isEdit?i("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.select,horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          주소"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("multiselect",{staticClass:"inline",class:{invalid:!e.valid.popCtprvnCode},staticStyle:{width:"156px"},attrs:{showLabels:!1,searchable:!1,options:e.code.popCtprvnCode,loading:e.isLoad.popCtprvnCode,"track-by":"addressCode",label:"addressCodeName",placeholder:"선택"},on:{select:e.onFirstAddress},model:{value:e.popCtprvnCode,callback:function(t){e.popCtprvnCode=t},expression:"popCtprvnCode"}}),e._v(" "),e.popCtprvnCode?i("multiselect",{staticClass:"inline",class:{invalid:!e.valid.popSigCode},staticStyle:{width:"160px"},attrs:{showLabels:!1,searchable:!1,options:e.code.popSigCode,loading:e.isLoad.popSigCode,"track-by":"addressCode",label:"addressCodeName",placeholder:"선택"},model:{value:e.popSigCode,callback:function(t){e.popSigCode=t},expression:"popSigCode"}}):e._e()],2):i("b-form-fieldset",{attrs:{label:"주소",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.edgeAddress,type:"text",plaintext:""}})],1),e._v(" "),i("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          Bandwidth(Gbps)"),e.isEdit?i("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),e.isEdit?i("cleave",{staticClass:"form-control",staticStyle:{width:"156px"},attrs:{value:e.items.bandwidth,options:{numeral:!0,numeralPositiveOnly:!0,numeralDecimalScale:0},required:""},on:{"update:value":function(t){e.$set(e.items,"bandwidth",t)}},model:{value:e.items.bandwidth,callback:function(t){e.$set(e.items,"bandwidth",t)},expression:"items.bandwidth"}}):i("b-form-input",{attrs:{value:e.items.bandwidth,type:"text",plaintext:""}})],2),e._v(" "),e.isEdit?i("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[i("b-form-textarea",{attrs:{rows:6,required:""},model:{value:e.items.modifyHistReason,callback:function(t){e.$set(e.items,"modifyHistReason",t)},expression:"items.modifyHistReason"}})],1):e._e()],1)],1),e._v(" "),e.isEdit?e._e():i("div",{staticClass:"collapse-title"},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formHistory",modifiers:{formHistory:!0}}],staticClass:"btn-collapse"},[i("i",{staticClass:"fa"}),e._v("\n      처리이력\n    ")])],1),e._v(" "),e.isEdit?e._e():i("b-collapse",{attrs:{id:"formHistory",visible:""}},[i("b-form",{staticClass:"formView"},[i("div",{staticClass:"form-row"},[i("b-form-fieldset",{attrs:{label:"등록일시",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.createDateTime,plaintext:"",type:"text"}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"등록자",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.createId,plaintext:"",type:"text"}})],1)],1),e._v(" "),i("div",{staticClass:"form-row"},[e.items.modifyDateTime?i("b-form-fieldset",{attrs:{label:"수정일시",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.modifyDateTime,plaintext:"",type:"text"}})],1):e._e(),e._v(" "),i("b-form-fieldset",{attrs:{label:"수정자",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.modifyId,plaintext:"",type:"text"}})],1)],1),e._v(" "),e.items.processId?i("b-form-fieldset",{attrs:{label:"배포상태",horizontal:!0}},[i("input",{staticClass:"form-control-plaintext",staticStyle:{width:"50px"},attrs:{type:"text",readonly:"readonly"},domProps:{value:e.items.processStateCodeName}}),e._v(" "),i("a",{staticClass:"btn btn-in-table",attrs:{href:"#/workflow/service/"+e.items.processId,target:"_blank"}},[e._v(e._s(e.items.processId))])]):e._e(),e._v(" "),e.items.processId||e.isHistory?e._e():i("b-form-fieldset",{attrs:{label:"배포상태",horizontal:!0}},[i("input",{staticClass:"form-control-plaintext",staticStyle:{width:"50px"},attrs:{type:"text",readonly:"readonly",value:"대기"}})])],1)],1),e._v(" "),e.isEdit?i("div",{staticClass:"page-btn"},[i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onView}},[e._v("취소")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmit}},[e._v("저장")])],1):i("div",{staticClass:"page-btn"},[i("b-button",{staticClass:"float-left",attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onDelete}},[e._v("삭제")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.showHistory}},[e._v("이력관리")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Edge 관리"}}},[e._v("목록")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onEdit}},[e._v("수정")])],1),e._v(" "),i("b-modal",{attrs:{id:"serviceModal",size:"lg"},on:{hide:e.onResetService},model:{value:e.isModalServiceType,callback:function(t){e.isModalServiceType=t},expression:"isModalServiceType"}},[i("template",{slot:"modal-title"},[e._v("\n      "+e._s(e.items.serviceName)+"\n      "),i("small",[e._v(" > Service Type/Protocol")])]),e._v(" "),i("b-form",{staticClass:"formView",attrs:{validated:e.inValidServiceForm,novalidate:""}},[i("b-form-fieldset",{attrs:{label:"구분",horizontal:!0}},[i("b-form-radio-group",{attrs:{options:[{text:"추가",value:"ADD"},{text:"삭제",value:"DELETE"}]},on:{change:e.resetServiceType},model:{value:e.serviceItems.command,callback:function(t){e.$set(e.serviceItems,"command",t)},expression:"serviceItems.command"}})],1),e._v(" "),i("b-form-fieldset",{attrs:{"invalid-feedback":e.feedback.serviceTypeCode,horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          ServiceType/Protocol "),"DELETE"===e.serviceItems.command?i("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),i("multiselect",{staticClass:"multiple",class:{"is-invalid":!e.valid.serviceTypeCode},attrs:{role:"ADD"===e.serviceItems.command?"addMode":"delMode","track-by":"serviceTypeAndProtocolCode",label:"serviceTypeName",multiple:!0,searchable:!1,showLabels:!1,closeOnSelect:!1,options:e.code.serviceTypeCode,loading:e.isLoad.serviceTypeCode},on:{select:e.onSelectType,remove:e.onRemoveType},model:{value:e.serviceTypeCode,callback:function(t){e.serviceTypeCode=t},expression:"serviceTypeCode"}})],2),e._v(" "),i("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[i("b-form-textarea",{attrs:{rows:6,required:""},model:{value:e.serviceItems.modifyHistReason,callback:function(t){e.$set(e.serviceItems,"modifyHistReason",t)},expression:"serviceItems.modifyHistReason"}})],1)],1),e._v(" "),i("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmitService}},[e._v("저장")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onResetService}},[e._v("취소")])],1)],2),e._v(" "),i("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:e.isModalHistory,callback:function(t){e.isModalHistory=t},expression:"isModalHistory"}},[i("section",{staticClass:"board"},[i("b-table",{attrs:{hover:"","show-empty":"",items:e.history.items,fields:e.history.fields,"current-page":e.history.pageInfo.page,"per-page":e.history.pageInfo.size},scopedSlots:e._u([{key:"histMgmtId",fn:function(t){return[i("a",{attrs:{href:e.getHistoryLink(t.value),target:"_blank"}},[e._v("보기")])]}}])})],1),e._v(" "),i("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":e.history.pageInfo.totalCount,"per-page":e.history.pageInfo.size},model:{value:e.history.pageInfo.page,callback:function(t){e.$set(e.history.pageInfo,"page",t)},expression:"history.pageInfo.page"}}),e._v(" "),i("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(t){e.isModalHistory=!1}}},[e._v("확인")])],1)],1),e._v(" "),i("b-modal",{class:"modal-"+e.modal.type,attrs:{title:"Message",size:"sm"},model:{value:e.modal.open,callback:function(t){e.$set(e.modal,"open",t)},expression:"modal.open"}},[i("div",{staticClass:"d-block text-center"},[i("p",[e._v(e._s(e.modal.msg))])]),e._v(" "),i("div",{staticClass:"mx-auto",attrs:{slot:"modal-footer"},slot:"modal-footer"},[i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.modal.action}},[e._v("확인")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(t){e.modal.open=!1}}},[e._v("취소")])],1)])],1)},s=[],a={render:o,staticRenderFns:s};t.a=a},614:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(1051),s=i(1052),a=i(15),r=a(o.a,s.a,null,null,null);t.default=r.exports}});