webpackJsonp([78],{1041:function(t,e,a){"use strict";var s=a(180),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t};e.a={name:"cache",props:["id"],components:{cSwitch:s.a},data:function(){return{originItems:{},items:{popId:20,popName:null,serviceId:4,serviceName:null,bandwidth:null,popBandwidth:null,setApplyYn:null,modifyHistReason:null,cacheThrottlingCases:[]},caseSeq:1,caseFields:{serviceTypeCodeName:{label:"Service Type",class:"serviceType"},bandwidth1:{label:"Set1 (Basic)",class:"bandwidth"},bandwidth2:{label:"Set2",class:"bandwidth"}},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},isEdit:!1,isModalHistory:!1,modal:{open:!1,type:"done",msg:"",action:function(){}},processStateCodeName:"진행중",processId:12332,inValidForm:!1}},computed:{total:function(){return this.items.cacheThrottlingCases.length>0?this.items.cacheThrottlingCases.map(function(t){var e=t.cacheThrottlingComps;return{bandwidth1:e.map(function(t){var e=t.bandwidth1;return""!==e?e:0}).reduce(function(t,e){return t+e}),bandwidth2:e.map(function(t){var e=t.bandwidth2;return""!==e?e:0}).reduce(function(t,e){return t+e})}}):[{bandwidth1:0,bandwidth2:0}]}},created:function(){var t=this,e=this.$route.query.histories,a=this.$route.query.caseSeq,s=void 0!==e?"/policy/cacheThrottlings/"+this.id+"/case/"+a+"/histories/"+e:"/policy/cacheThrottlings/"+this.id;e&&document.querySelector("body.app").classList.add("history-mode"),this.$https.get(s).then(function(e){t.items=i({},t.items,e.data.items,{bandwidth:e.data.items.popBandwidth}),t.setCacheCaseData(),t.originItems=JSON.parse(JSON.stringify(t.items))})},methods:{onEdit:function(){this.isEdit=!0},onView:function(){this.isEdit=!1,this.items=JSON.parse(JSON.stringify(this.originItems))},onSubmit:function(){var t=this,e=this.items,a=e.popId,s=e.serviceId,n=e.bandwidth,o=e.setApplyYn,l=e.modifyHistReason,r=this.items.cacheThrottlingCases.filter(function(e){var a=e.caseSeq;return t.caseSeq===a}).map(function(t){var e=t.cacheThrottlingComps.length>0?t.cacheThrottlingComps.map(function(t){return{serviceTypeCode:t.serviceTypeCode,bandwidth1:t.bandwidth1,bandwidth2:t.bandwidth2}}):[];return i({},t,{cacheThrottlingComps:e})}),c=this.$valid.all({modifyHistReason:l});this.inValidForm=!c,c&&this.$https.put("/policy/cacheThrottlings/"+this.id,{popId:a,serviceId:s,bandwidth:n,setApplyYn:o,cacheThrottlingCases:r,modifyHistReason:l}).then(function(){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)})},onDelete:function(){this.modal={open:!0,type:"error",msg:"정말로 삭제하시겠습니까?",action:this.onDeleteData}},onDeleteData:function(){var t=this;this.$https.delete("/policy/cacheThrottlings/"+this.id).then(function(){t.$router.push({name:"Cache Throttling 관리"})}).catch(function(t){console.log(t)})},onCheckBandwidth:function(){var t=this,e=!0;return this.total.forEach(function(a){var s=a.bandwidth1,i=a.bandwidth2;(s>t.items.bandwidth||i>t.items.bandwidth)&&(e=!1)}),e},onChecked:function(t,e){var a="band"+e+"UseYn",s="bandwidth"+e;t[a]||(t[s]=0)},onChangeSet2:function(t){var e=this.items.cacheThrottlingCases;!t&&e.length>0&&e.forEach(function(t){var e=t.cacheThrottlingComps;e.length>0&&e.forEach(function(t){t.band2UseYn=!1,t.bandwidth2=0})})},onSelectCase:function(t){var e=parseInt(t.target.value),a=this.items.cacheThrottlingCases.filter(function(t){return t.caseSeq!==e}),s=this.originItems.cacheThrottlingCases;a.length&&a.forEach(function(t){var e=s.find(function(e){return e.caseSeq===t.caseSeq});t.cacheThrottlingComps=JSON.parse(JSON.stringify(e.cacheThrottlingComps))})},setCacheCaseData:function(){this.items.cacheThrottlingCases=this.items.cacheThrottlingCases.map(function(t){var e=t.cacheThrottlingComps.length>0?t.cacheThrottlingComps.map(function(t){return i({},t,{band1UseYn:t.bandwidth1>0,band2UseYn:t.bandwidth2>0})}):[];return i({},t,{cacheThrottlingComps:e})})},setDefault:function(t,e){t[e]=""!==t[e]?parseInt(t[e]):0},getHistoryLink:function(t,e){return"#/configuration/edges/cache/"+this.id+"?histories="+t+"&caseSeq="+e},showHistory:function(t){var e=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/policy/cacheThrottlings/"+this.id+"/case/"+t+"/histories").then(function(t){e.history.items=t.data.items})}}}},1042:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-form",{staticClass:"formView"},[a("b-form-fieldset",{attrs:{label:"Service",horizontal:!0}},[a("b-form-input",{attrs:{value:t.items.serviceName,type:"text",plaintext:""}})],1),t._v(" "),a("b-form-fieldset",{attrs:{label:"PoP",horizontal:!0}},[a("b-form-input",{attrs:{value:t.items.popName,type:"text",plaintext:""}}),t._v(" "),a("small",{staticClass:"form-text-alone text-muted"},[t._v("(Bandwidth : "+t._s(t.items.bandwidth)+" GB)")])],1),t._v(" "),a("b-form-fieldset",{attrs:{label:"Set2사용여부",horizontal:!0}},[t.isEdit?a("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},on:{change:t.onChangeSet2},model:{value:t.items.setApplyYn,callback:function(e){t.$set(t.items,"setApplyYn",e)},expression:"items.setApplyYn"}}):a("span",{staticClass:"badge",class:{primary:t.items.setApplyYn}},[t._v("\n        "+t._s(t.items.setApplyYn?"사용":"미사용")+"\n      ")]),t._v(" "),a("small",{staticClass:"form-text-alone text-muted"},[t._v("(적용 시간 : 02:00:00 ~ 04:59:00)")])],1)],1),t._v(" "),t._l(t.items.cacheThrottlingCases,function(e,s){return t.items.cacheThrottlingCases.length>0?a("div",{key:s,staticClass:"cache-content"},[a("h3",{staticClass:"cache-title"},[t.isEdit?a("label",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.caseSeq,expression:"caseSeq"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"caseSeq"},domProps:{value:e.caseSeq,checked:t._q(t.caseSeq,e.caseSeq)},on:{change:[function(a){t.caseSeq=e.caseSeq},t.onSelectCase]}}),t._v(" "),a("span",{staticClass:"custom-control-indicator",attrs:{"aria-hidden":"true"}})]):a("i",{staticClass:"fa fa-arrow-right"}),t._v(" "),a("strong",[t._v("CASE "+t._s(e.caseSeq)+"/")]),t._v(t._s(e.caseName)+"\n\n      "),t.isEdit?t._e():a("b-button",{staticClass:"float-right",attrs:{type:"button",variant:"in-table"},on:{click:function(a){t.showHistory(e.caseSeq)}}},[t._v("이력관리")])],1),t._v(" "),e.cacheThrottlingComps.length?a("section",{staticClass:"board"},[a("b-table",{attrs:{"show-empty":"","foot-clone":"",items:e.cacheThrottlingComps,fields:t.caseFields},scopedSlots:t._u([{key:"bandwidth1",fn:function(s){return[t.isEdit?a("span",[a("b-form-checkbox",{attrs:{disabled:t.caseSeq!==e.caseSeq},on:{change:function(e){t.onChecked(s.item,"1")}},model:{value:s.item.band1UseYn,callback:function(e){t.$set(s.item,"band1UseYn",e)},expression:"row.item.band1UseYn"}}),t._v(" "),a("cleave",{staticClass:"form-control",staticStyle:{width:"80px"},attrs:{options:{numeral:!0,numeralPositiveOnly:!0,numeralDecimalScale:0},disabled:!s.item.band1UseYn||t.caseSeq!==e.caseSeq},on:{input:function(e){t.setDefault(s.item,"bandwidth1")}},model:{value:s.item.bandwidth1,callback:function(e){t.$set(s.item,"bandwidth1",t._n(e))},expression:"row.item.bandwidth1"}}),t._v(" GB 제한\n          ")],1):a("span",[t._v(t._s(s.value>0?s.value+" GB 제한":"--"))])]}},{key:"bandwidth2",fn:function(s){return[t.isEdit?a("span",[a("b-form-checkbox",{attrs:{disabled:!t.items.setApplyYn||t.caseSeq!==e.caseSeq},on:{change:function(e){t.onChecked(s.item,"2")}},model:{value:s.item.band2UseYn,callback:function(e){t.$set(s.item,"band2UseYn",e)},expression:"row.item.band2UseYn"}}),t._v(" "),a("cleave",{staticClass:"form-control",staticStyle:{width:"80px"},attrs:{options:{numeral:!0,numeralPositiveOnly:!0,numeralDecimalScale:0},disabled:!s.item.band2UseYn||t.caseSeq!==e.caseSeq},on:{input:function(e){t.setDefault(s.item,"bandwidth2")}},model:{value:s.item.bandwidth2,callback:function(e){t.$set(s.item,"bandwidth2",t._n(e))},expression:"row.item.bandwidth2"}}),t._v(" GB 제한\n          ")],1):a("span",[t._v(t._s(s.value>0?s.value+" GB 제한":"--"))])]}},{key:"FOOT_serviceTypeCodeName",fn:function(e){return[a("span",{staticClass:"total-title"},[t._v("Total")])]}},{key:"FOOT_bandwidth1",fn:function(e){return[t.total[s].bandwidth1>t.items.bandwidth?a("small",{staticClass:"invalid"},[t._v("설정 가능한 최대 Bandwidth "+t._s(t.items.bandwidth)+" GB를 초과하였습니다")]):t._e(),t._v(" "),a("span",{staticClass:"total-text",class:{"text-danger":t.total[s].bandwidth1>t.items.bandwidth}},[t._v(t._s(t.total[s].bandwidth1)+" GB 제한")])]}},{key:"FOOT_bandwidth2",fn:function(e){return[t.total[s].bandwidth2>t.items.bandwidth?a("small",{staticClass:"invalid"},[t._v("설정 가능한 최대 Bandwidth "+t._s(t.items.bandwidth)+" GB를 초과하였습니다")]):t._e(),t._v(" "),a("span",{staticClass:"total-text",class:{"text-danger":t.total[s].bandwidth2>t.items.bandwidth}},[t._v(t._s(t.total[s].bandwidth2)+" GB 제한")])]}}])})],1):t._e(),t._v(" "),t.isEdit?t._e():a("div",{staticClass:"formView"},[a("b-form-fieldset",{attrs:{label:"배포 일시 / 상태",horizontal:!0}},[a("small",{staticClass:"text-muted"},[t._v(t._s(t.items.createDateTime))]),t._v(" "),a("span",{staticClass:"ml-2 mr-2"},[t._v("/")]),t._v(" "),a("input",{staticClass:"form-control-plaintext",staticStyle:{width:"50px"},attrs:{type:"text",readonly:"readonly"},domProps:{value:t.processStateCodeName}}),t._v(" "),a("a",{staticClass:"btn btn-in-table",attrs:{href:"#/workflow/service/"+t.processId,target:"_blank"}},[t._v(t._s(t.processId))])])],1)]):t._e()}),t._v(" "),t.isEdit?a("b-form",{staticClass:"formView",staticStyle:{"margin-top":"30px"},attrs:{validated:t.inValidForm,novalidate:""}},[a("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":t.$valid.msg.require,horizontal:!0}},[a("b-form-textarea",{attrs:{required:"",rows:6},model:{value:t.items.modifyHistReason,callback:function(e){t.$set(t.items,"modifyHistReason",e)},expression:"items.modifyHistReason"}})],1)],1):t._e(),t._v(" "),t.isEdit?t._e():a("div",{staticClass:"collapse-title"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formHistory",modifiers:{formHistory:!0}}],staticClass:"btn-collapse"},[a("i",{staticClass:"fa"}),t._v("\n      처리이력\n    ")])],1),t._v(" "),t.isEdit?t._e():a("b-collapse",{attrs:{id:"formHistory",visible:""}},[a("b-form",{staticClass:"formView"},[a("div",{staticClass:"form-row"},[a("b-form-fieldset",{attrs:{label:"등록일시",horizontal:!0}},[a("b-form-input",{attrs:{value:t.items.createDateTime,plaintext:"",type:"text"}})],1),t._v(" "),a("b-form-fieldset",{attrs:{label:"등록자",horizontal:!0}},[a("b-form-input",{attrs:{value:t.items.createId,plaintext:"",type:"text"}})],1)],1),t._v(" "),a("div",{staticClass:"form-row"},[a("b-form-fieldset",{attrs:{label:"수정일시",horizontal:!0}},[a("b-form-input",{attrs:{value:t.items.modifyDateTime,plaintext:"",type:"text"}})],1),t._v(" "),a("b-form-fieldset",{attrs:{label:"수정자",horizontal:!0}},[a("b-form-input",{attrs:{value:t.items.modifyId,plaintext:"",type:"text"}})],1)],1)])],1),t._v(" "),t.isEdit?a("div",{staticClass:"page-btn"},[a("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.onView}},[t._v("취소")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"primary",disabled:!t.onCheckBandwidth()},on:{click:t.onSubmit}},[t._v("저장 및 배포")])],1):a("div",{staticClass:"page-btn"},[a("b-button",{staticClass:"float-left",attrs:{type:"button",variant:"outline-secondary"},on:{click:t.onDelete}},[t._v("삭제")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Cache Throttling 관리"}}},[t._v("목록")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.onEdit}},[t._v("수정")])],1),t._v(" "),a("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:t.isModalHistory,callback:function(e){t.isModalHistory=e},expression:"isModalHistory"}},[a("section",{staticClass:"board"},[a("b-table",{attrs:{hover:"","show-empty":"",items:t.history.items,fields:t.history.fields,"current-page":t.history.pageInfo.page,"per-page":t.history.pageInfo.size},scopedSlots:t._u([{key:"histMgmtId",fn:function(e){return[a("a",{attrs:{href:t.getHistoryLink(e.value,e.item.caseSeq),target:"_blank"}},[t._v("보기")])]}}])})],1),t._v(" "),a("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":t.history.pageInfo.totalCount,"per-page":t.history.pageInfo.size},model:{value:t.history.pageInfo.page,callback:function(e){t.$set(t.history.pageInfo,"page",e)},expression:"history.pageInfo.page"}}),t._v(" "),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.isModalHistory=!1}}},[t._v("확인")])],1)],1),t._v(" "),a("b-modal",{class:"modal-"+t.modal.type,attrs:{title:"Message",size:"sm"},model:{value:t.modal.open,callback:function(e){t.$set(t.modal,"open",e)},expression:"modal.open"}},[a("div",{staticClass:"d-block text-center"},[a("p",[t._v(t._s(t.modal.msg))])]),t._v(" "),a("div",{staticClass:"mx-auto",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.modal.action}},[t._v("확인")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(e){t.modal.open=!1}}},[t._v("취소")])],1)])],2)},i=[],n={render:s,staticRenderFns:i};e.a=n},609:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(1041),i=a(1042),n=a(15),o=n(s.a,i.a,null,null,null);e.default=o.exports}});