webpackJsonp([52],{1126:function(e,t,s){"use strict";var i=s(180),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};t.a={name:"service",props:["id"],components:{cSwitch:i.a},data:function(){return{name:"Service 상세",originItems:{},tempItems:{},items:{protocolCode:[],serviceTypeName:"",serviceTypeCode:"",rankVolumn:"",rankCount:"",hashDivisor:"",serviceTypeUseYn:!1,createDateTime:"",modifyDateTime:"",isEditable:!1,serviceTypeDomainName:"",modifyHistReason:"",processStateCode:null,processId:null},code:{serviceTypeProtocolList:[],tempServiceTypeProtocolList:[],protocolList:[],serviceTypeCode:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyType:{label:"구분"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},isEdit:!1,isModalHistory:!1,isModalServiceType:!1,isModalUseYn:!1,modal:{open:!1,type:"done",msg:"",action:function(){},hideCancelBtn:!1},serviceTypeUseYnItems:{serviceTypeUseYn:null,modifyHistReason:"서비스 타입 사용 여부 변경"},serviceTypeNameExists:null,inValidServiceForm:!1,inValidRemoveServiceType:!1,inValidUseForm:!1,inValidForm:!1}},computed:{serviceTypeProtocolList:{get:function(){var e=this;return this.code.tempServiceTypeProtocolList.length>0?this.code.tempServiceTypeProtocolList.map(function(t){return e.code.serviceTypeProtocolList.find(function(e){return e.code===t.protocolCode})}):[]},set:function(e){this.code.tempServiceTypeProtocolList=e.length>0?e.map(function(e){return{protocolCode:e.code}}):[]}},valid:function(){return{serviceTypeName:null===this.tempItems.serviceTypeName||0===this.tempItems.serviceTypeName.length?null:this.tempItems.serviceTypeName.length>0&&/^[A-Za-z0-9]*$/.test(this.tempItems.serviceTypeName),serviceTypeProtocolList:this.code.serviceTypeProtocolList.length}},feedback:function(){return{serviceTypeName:!/^[A-Za-z0-9]*$/.test(this.tempItems.serviceTypeName)&&this.tempItems.serviceTypeName.length>0?"영문, 숫자만 입력하십시오.":null===this.serviceTypeNameExists&&this.tempItems.serviceTypeName.length>0?"중복확인은 필수입니다.":"not"===this.serviceTypeNameExists?"입력된 항목이 없습니다.":"fail"===this.serviceTypeNameExists?"이미 등록된 Service Name이 있습니다.":0===this.items.serviceTypeName.length?this.$valid.msg.require:""}}},created:function(){var e=this,t=this.$route.query.histories;this.detailUrl=void 0!==t?"/servicetype/"+this.id+"/histories/"+t:"/servicetype/"+this.id,t&&document.querySelector("body.app").classList.add("history-mode"),this.$https.get(this.detailUrl).then(function(t){e.items=t.data.items,e.originItems=JSON.parse(JSON.stringify(e.items))}),this.$https.get("/system/commonCode",{q:{groupCode:"PROTOCOL"}}).then(function(t){e.code.serviceTypeProtocolList=t.data.items.map(function(e){return e.codeName=e.codeName.toUpperCase(),e})})},methods:{fetchNameExists:function(){var e=this;if(!this.tempItems.serviceTypeName)return void(this.serviceTypeNameExists="not");this.$https.get("/servicetype/name",{serviceTypeName:this.tempItems.serviceTypeName}).then(function(t){e.serviceTypeNameExists="Success"===t.data.result?"success":e.items.serviceTypeName===e.tempItems.serviceTypeName?"success":"fail"})},checkIsEditable:function(e){var t=this.items.isEditable?this.items.isEditable:"",s="function"==typeof e&&e.name?e.name:null;1==t&&s?"bound onEditUseYn"===s?this.onEditUseYn():"bound onEdit"===s?this.onEdit():"bound onDelete"===s&&this.onDelete():this.onCannotEdit()},onEditUseYn:function(){this.isModalUseYn=!this.isModalUseYn},onEdit:function(){var e=this;this.isEdit=!0,this.tempItems=JSON.parse(JSON.stringify(this.originItems)),this.tempItems.protocolCode.split(",").forEach(function(t){return e.code.tempServiceTypeProtocolList.push(e.code.serviceTypeProtocolList.filter(function(e){return e.codeName===t}).map(function(e){return{protocolCode:e.code}})[0])})},onView:function(){this.isEdit=!1,this.tempItems={},this.code.tempServiceTypeProtocolList=[]},onSubmit:function(){var e=this,t=this.code.tempServiceTypeProtocolList;delete this.tempItems.isEditable;var s=o({},this.tempItems,{serviceTypeProtocolList:t});this.validate(s)&&!this.feedback.serviceTypeName&&this.$https.put("/servicetype/"+this.id+"/type2",s).then(function(t){e.$router.go(e.$router.currentRoute)}).catch(function(e){console.log(e)})},onCannotEdit:function(){var e=this;this.modal={open:!0,type:"error",msg:"현재 사용중인 Type은 삭제할 수 없습니다. \n해제 후, 다시 시도해주세요.\n",hideCancelBtn:!0,action:function(){e.modal.open=!1,e.modal.hideCancelBtn=!1}}},onDelete:function(){this.modal={open:!0,type:"error",msg:"정말로 삭제하시겠습니까?",action:this.onDeleteData}},onDeleteData:function(){var e=this;this.$https.delete("/servicetype/"+this.id+"/type3").then(function(t){e.$router.push({name:"ServiceType 관리"})}).catch(function(e){console.log(e)})},onOpenUseYn:function(){this.serviceTypeUseYnItems.serviceTypeUseYn=this.originItems.serviceTypeUseYn},onSubmitUseYn:function(){var e=this,t=this.$valid.all(this.serviceTypeUseYnItems);this.inValidUseForm=!t,t&&this.$https.put("/servicetype/"+this.id+"/use",this.serviceTypeUseYnItems).then(function(){e.isModalUseYn=!1,e.items.serviceTypeUseYn=e.serviceTypeUseYnItems.serviceTypeUseYn,e.originItems.serviceTypeUseYn=e.serviceTypeUseYnItems.serviceTypeUseYn}).catch(function(t){console.log(t),e.onResetUseYn()})},onResetUseYn:function(){this.isModalUseYn=!1,this.serviceTypeUseYnItems={serviceTypeUseYn:null,modifyHistReason:"서비스 사용 여부 변경"}},validate:function(e){var t=e.serviceTypeName,s=e.serviceTypeProtocolList,i=e.rankVolumn,o=e.rankCount,a=e.hashDivisor,n=e.serviceTypeUseYn,r=e.modifyHistReason,l={serviceTypeName:t,serviceTypeProtocolList:s,rankVolumn:i,rankCount:o,hashDivisor:a,serviceTypeUseYn:n,modifyHistReason:r},c=this.$valid.all(l);return this.inValidForm=!c,c},getHistoryLink:function(e){return"#/service/servicetype/"+this.id+"?histories="+e},showHistory:function(){var e=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/servicetype/"+this.id+"/histories").then(function(t){e.history.items=t.data.items})}}}},1127:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animated fadeIn"},[s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),e._v("\n      기본정보\n    ")])],1),e._v(" "),s("b-collapse",{attrs:{id:"formDefault",visible:""}},[s("b-form",{staticClass:"formView",attrs:{validated:e.inValidForm,novalidate:""}},[e.isEdit?e._e():s("b-form-fieldset",{attrs:{horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Name\n        ")]),e._v(" "),e.isEdit?e._e():s("b-form-input",{attrs:{value:e.items.serviceTypeName,type:"text",plaintext:""}})],2),e._v(" "),e.isEdit?s("b-form-fieldset",{attrs:{"invalid-feedback":e.feedback.serviceTypeName,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Name\n          "),s("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),s("b-form-input",{attrs:{type:"text",placeholder:"",state:e.valid.serviceTypeName,required:""},on:{input:function(t){e.serviceTypeNameExists=null}},model:{value:e.tempItems.serviceTypeName,callback:function(t){e.$set(e.tempItems,"serviceTypeName",t)},expression:"tempItems.serviceTypeName"}}),e._v(" "),s("b-button",{attrs:{variant:"in-table"},on:{click:e.fetchNameExists}},[e._v("중복확인")]),e._v(" "),e.isEdit&&null!==e.serviceTypeNameExists?s("span",{staticClass:"ico ml-2 mid"},["success"===e.serviceTypeNameExists?s("i",{staticClass:"fa fa-check-circle"}):e._e(),e._v(" "),"fail"===e.serviceTypeNameExists?s("i",{staticClass:"fa fa-times-circle"}):e._e()]):e._e()],2):e._e(),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.select,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Protocol\n          "),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),e.isEdit?e._e():s("b-form-input",{attrs:{value:e.items.protocolCode,plaintext:"",type:"text"}}),e._v(" "),e.isEdit?s("multiselect",{staticClass:"multiselect",class:{invalid:!e.valid.serviceTypeProtocolList},attrs:{"track-by":"codeName",label:"codeName",multiple:!0,showLabels:!1,options:e.code.serviceTypeProtocolList,placeholder:"Select service type protocol"},model:{value:e.serviceTypeProtocolList,callback:function(t){e.serviceTypeProtocolList=t},expression:"serviceTypeProtocolList"}}):e._e()],2),e._v(" "),s("div",{staticClass:"form-row"},[s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n            Rank Size\n            "),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),e.isEdit?e._e():s("b-form-input",{attrs:{value:e.items.rankVolumn,plaintext:"",type:"text"}}),e._v(" "),e.isEdit?s("b-form-input",{attrs:{type:"number",min:"1",max:"99999999999",required:""},model:{value:e.tempItems.rankVolumn,callback:function(t){e.$set(e.tempItems,"rankVolumn",t)},expression:"tempItems.rankVolumn"}}):e._e()],2),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n            Rank Count\n            "),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),e.isEdit?e._e():s("b-form-input",{attrs:{value:e.items.rankCount,plaintext:"",type:"text"}}),e._v(" "),e.isEdit?s("b-form-input",{attrs:{type:"number",min:"1",max:"99999999999",required:""},model:{value:e.tempItems.rankCount,callback:function(t){e.$set(e.tempItems,"rankCount",t)},expression:"tempItems.rankCount"}}):e._e()],2)],1),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Hash\n          "),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),e.isEdit?e._e():s("b-form-input",{attrs:{value:e.items.hashDivisor,plaintext:"",type:"text"}}),e._v(" "),e.isEdit?s("b-form-input",{attrs:{type:"text",required:""},model:{value:e.tempItems.hashDivisor,callback:function(t){e.$set(e.tempItems,"hashDivisor",t)},expression:"tempItems.hashDivisor"}}):e._e()],2),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          사용여부\n          "),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),e.isEdit?e._e():s("span",{staticClass:"badge",class:{primary:e.items.serviceTypeUseYn}},[e._v(e._s(e.items.serviceTypeUseYn?"사용":"미사용")+"\n        ")]),e._v(" "),e.isEdit?e._e():s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"in-table-icon",title:"ServiceType 사용여부 수정"},on:{click:function(t){e.checkIsEditable(e.onEditUseYn)}}},[s("i",{staticClass:"fa fa-pencil"})]),e._v(" "),e.isEdit?s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.tempItems.serviceTypeUseYn,callback:function(t){e.$set(e.tempItems,"serviceTypeUseYn",t)},expression:"tempItems.serviceTypeUseYn"}}):e._e()],2),e._v(" "),e.isEdit?s("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:6,required:""},model:{value:e.tempItems.modifyHistReason,callback:function(t){e.$set(e.tempItems,"modifyHistReason",t)},expression:"tempItems.modifyHistReason"}})],1):e._e()],1)],1),e._v(" "),e.isEdit?e._e():s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formHistory",modifiers:{formHistory:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),e._v("\n      처리이력\n    ")])],1),e._v(" "),e.isEdit?e._e():s("b-collapse",{attrs:{id:"formHistory",visible:""}},[s("b-form",{staticClass:"formView"},[s("div",{staticClass:"form-row"},[s("b-form-fieldset",{attrs:{label:"등록일시",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.createDateTime,plaintext:"",type:"text"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"등록자",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.createId,plaintext:"",type:"text"}})],1)],1),e._v(" "),s("div",{staticClass:"form-row"},[s("b-form-fieldset",{attrs:{label:"수정일시",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.modifyDateTime,plaintext:"",type:"text"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"수정자",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.modifyId,plaintext:"",type:"text"}})],1)],1)])],1),e._v(" "),e.isEdit?s("div",{staticClass:"page-btn"},[s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onView}},[e._v("취소")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmit}},[e._v("저장")])],1):s("div",{staticClass:"page-btn"},[s("span",[s("b-button",{staticClass:"float-left",attrs:{type:"button",variant:"outline-secondary"},on:{click:function(t){e.checkIsEditable(e.onDelete)}}},[e._v("삭제")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.showHistory}},[e._v("이력관리")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"ServiceType 관리"}}},[e._v("목록")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(t){e.checkIsEditable(e.onEdit)}}},[e._v("수정")])],1)]),e._v(" "),s("b-modal",{attrs:{size:"lg"},on:{show:e.onOpenUseYn,hide:e.onResetUseYn},model:{value:e.isModalUseYn,callback:function(t){e.isModalUseYn=t},expression:"isModalUseYn"}},[s("template",{slot:"modal-title"},[e._v("\n      "+e._s(e.items.serviceTypeCode)+"\n      "),s("small",[e._v(" > 사용 여부")])]),e._v(" "),s("b-form",{staticClass:"formView",attrs:{validated:e.inValidUseForm,novalidate:""}},[s("b-form-fieldset",{attrs:{label:"사용 여부",horizontal:!0}},[s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.serviceTypeUseYnItems.serviceTypeUseYn,callback:function(t){e.$set(e.serviceTypeUseYnItems,"serviceTypeUseYn",t)},expression:"serviceTypeUseYnItems.serviceTypeUseYn"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:6,required:""},model:{value:e.serviceTypeUseYnItems.modifyHistReason,callback:function(t){e.$set(e.serviceTypeUseYnItems,"modifyHistReason",t)},expression:"serviceTypeUseYnItems.modifyHistReason"}})],1)],1),e._v(" "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmitUseYn}},[e._v("저장")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onResetUseYn}},[e._v("취소")])],1)],2),e._v(" "),s("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:e.isModalHistory,callback:function(t){e.isModalHistory=t},expression:"isModalHistory"}},[s("section",{staticClass:"board"},[s("b-table",{attrs:{hover:"","show-empty":"",items:e.history.items,fields:e.history.fields,"current-page":e.history.pageInfo.page,"per-page":e.history.pageInfo.size},scopedSlots:e._u([{key:"modifyHistReason",fn:function(t){return[e._v("\n          "+e._s(t.value?t.value:"-")+"\n        ")]}},{key:"histMgmtId",fn:function(t){return[s("a",{attrs:{href:e.getHistoryLink(t.value),target:"_blank"}},[e._v("보기")])]}}])})],1),e._v(" "),s("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":e.history.pageInfo.totalCount,"per-page":e.history.pageInfo.size},model:{value:e.history.pageInfo.page,callback:function(t){e.$set(e.history.pageInfo,"page",t)},expression:"history.pageInfo.page"}}),e._v(" "),s("div",{staticClass:"mx-auto",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(t){e.isModalHistory=!1}}},[e._v("확인")])],1)],1),e._v(" "),s("b-modal",{class:"modal-"+e.modal.type,attrs:{title:"Message",size:"sm"},model:{value:e.modal.open,callback:function(t){e.$set(e.modal,"open",t)},expression:"modal.open"}},[s("div",{staticClass:"d-block text-center"},[s("p",[e._v(e._s(e.modal.msg))])]),e._v(" "),s("div",{staticClass:"mx-auto",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.modal.action}},[e._v("확인")]),e._v(" "),e.modal.hideCancelBtn?e._e():s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(t){e.modal.open=!1}}},[e._v("취소\n      ")])],1)])],1)},o=[],a={render:i,staticRenderFns:o};t.a=a},647:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(1126),o=s(1127),a=s(15),n=a(i.a,o.a,null,null,null);t.default=n.exports}});