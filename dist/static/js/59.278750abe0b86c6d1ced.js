webpackJsonp([59],{1110:function(e,t,s){"use strict";var i=s(180),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};t.a={name:"services",components:{cSwitch:i.a},data:function(){return{items:{companyCode:null,serviceName:"",serviceTypeId:null,serviceDomainName:"",serviceDomainList:[{domainPurposeCode:null,sslYn:!0,domainPortNumber:"",hashingType:null}],cnameUseYn:!0,cnameDomainName:"",sslCertUseYn:!0,sslCert:"",sslCertKey:"",sslCertExpireDate:"",serviceUseYn:!0},code:{companyCode:[],serviceTypeId:null,serviceTypeCodeAll:[],domainProtocolCode:[],serviceDomainList:[{domainPurposeCode:null,sslYn:!0,domainPortNumber:"",hashingType:null}]},isLoad:{companyCode:!0,serviceTypeId:!1,domainProtocolCode:!0,serviceDomainList:!0},serviceNameExists:null,inValidForm:!1}},computed:{companyCode:{get:function(){var e=this;return this.code.companyCode.find(function(t){return t.code===e.items.companyCode})||null},set:function(e){this.items.companyCode=null!==e?e.code:""}},serviceTypeId:{get:function(){var e=this;return this.code.serviceTypeId.find(function(t){return t.serviceTypeId===e.items.serviceTypeId})||null},set:function(e){this.items.serviceTypeId=null!==e?e.serviceTypeId:null}},valid:function(){return{serviceName:null===this.serviceNameExists&&0===this.items.serviceName.length?this.serviceNameExists:this.items.serviceName.length>0&&/^[A-Za-z0-9]*$/.test(this.items.serviceName)&&"success"===this.serviceNameExists,companyCode:null===this.items.companyCode?this.items.companyCode:this.items.companyCode.length>0}},feedback:function(){return{serviceName:!/^[A-Za-z0-9]*$/.test(this.items.serviceName)&&this.items.serviceName.length>0?"영문, 숫자만 입력하십시오.":null===this.serviceNameExists&&this.items.serviceName.length>0?"중복확인은 필수입니다.":"not"===this.serviceNameExists?"입력된 항목이 없습니다.":"fail"===this.serviceNameExists?"이미 등록된 Service Name이 있습니다.":0===this.items.serviceName.length?this.$valid.msg.require:""}}},created:function(){var e=this;this.$https.get("/system/commonCode",{q:{groupCode:"COMPANY"}}).then(function(t){e.isLoad.companyCode=!1,e.code.companyCode=t.data.items}),this.$https.get("/serviceTypeFilterList",{}).then(function(t){e.isLoad.serviceTypeId=!1,e.code.serviceTypeId=t.data.items}),this.$https.get("/system/commonCode",{q:{groupCode:"DOMAIN_PROTOCOL"}}).then(function(t){e.isLoad.domainProtocolCode=!1,e.code.domainProtocolCode=t.data.items}),this.$https.get("/system/commonCode",{q:{groupCode:"HASHING_TYPE"}}).then(function(t){e.isLoad.hashingTypeCode=!1,e.code.hashingTypeCode=t.data.items}),this.$https.get("/system/commonCode",{q:{groupCode:"DOMAIN_PUPOSE"}}).then(function(t){e.isLoad.domainPurposeCode=!1,e.code.domainPurposeCode=t.data.items,e.items.serviceDomainList[0].domainPurposeCode=a({},e.code.domainPurposeCode[0])}),this.$https.get("/system/commonCode",{q:{groupCode:"HASHING_TYPE"}}).then(function(t){e.isLoad.hashingType=!1,e.code.hashingType=t.data.items,e.items.serviceDomainList[0].hashingType=a({},e.code.hashingType[0])})},methods:{onSubmit:function(){var e=this,t=a({},this.items,{serviceDomainList:this.items.serviceDomainList.length?this.items.serviceDomainList.map(function(e){var t=e.domainPurposeCode,s=e.sslYn,i=e.domainPortNumber,a=e.hashingType;return{domainPurposeCode:t.code,sslYn:s,domainPortNumber:i,hashingType:a.code}}):[]});this.items.modifyHistReason="등록",this.validate(t)&&this.$https.post("/services",t).then(function(t){e.$router.push({name:"Service 상세",params:{id:t.data.items}})}).catch(function(e){console.log(e)})},fetchNameExists:function(){var e=this;if(!this.items.serviceName)return void(this.serviceNameExists="not");this.$https.get("/services/name",{serviceName:this.items.serviceName}).then(function(t){e.serviceNameExists="Success"===t.data.result?"success":"fail"})},validate:function(e){var t=e.companyCode,s=e.serviceName,i=e.serviceTypeCode,o=e.cnameDomainName,n=e.sslCert,r=e.sslCertKey,c=e.sslCertExpireDate,l=a({companyCode:t,serviceName:s},i);this.items.cnameUseYn&&(l=a({},l,{cnameDomainName:o})),this.items.sslCertUseYn&&(l=a({},l,{sslCert:n,sslCertKey:r,sslCertExpireDate:c}));var m=this.$valid.all(l)&&"success"===this.serviceNameExists;return this.inValidForm=!m,m},onRemoveType:function(e){this.getServiceDomain(e)},lowerFomatter:function(e){return e.toLowerCase()},getServiceDomain:function(e){e.code.split("_")[2];return this.code.serviceTypeCodeAll.find(function(t){var s=t.code;return e.code.slice(0,e.code.length)===s})},onAddRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.items[e].push(Object.assign({},{domainPurposeCode:this.code.domainPurposeCode[0],sslYn:!0,domainPortNumber:"",hashingType:this.code.hashingType[0]},t))},onDelRow:function(e,t){this.items[e].splice(t,1)}}}},1111:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animated fadeIn"},[s("b-form",{staticClass:"formView",attrs:{validated:e.inValidForm,novalidate:""}},[s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.select,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n        Company"),s("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),s("multiselect",{class:{invalid:!e.valid.companyCode},attrs:{"track-by":"code",label:"codeName",options:e.code.companyCode,showLabels:!1,loading:e.isLoad.companyCode,placeholder:"Select company"},model:{value:e.companyCode,callback:function(t){e.companyCode=t},expression:"companyCode"}})],2),e._v(" "),s("b-form-fieldset",{attrs:{description:"※ Service Name은 도메인에 포함되기 때문에 영문, 숫자만 입력 가능합니다.","invalid-feedback":e.feedback.serviceName,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n        Service Name"),s("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),s("b-form-input",{attrs:{type:"text",placeholder:"Enter service name",state:e.valid.serviceName,formatter:e.lowerFomatter,required:""},on:{input:function(t){e.serviceNameExists=null}},model:{value:e.items.serviceName,callback:function(t){e.$set(e.items,"serviceName",t)},expression:"items.serviceName"}}),e._v(" "),s("b-button",{attrs:{variant:"in-table"},on:{click:e.fetchNameExists}},[e._v("중복확인")]),e._v(" "),null!==e.serviceNameExists?s("span",{staticClass:"ico ml-2 mid"},["success"===e.serviceNameExists?s("i",{staticClass:"fa fa-check-circle"}):e._e(),e._v(" "),"fail"===e.serviceNameExists?s("i",{staticClass:"fa fa-times-circle"}):e._e()]):e._e()],2),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.select,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n        Service Type"),s("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),s("multiselect",{attrs:{showLabels:!1,searchable:!1,options:e.code.serviceTypeId,loading:e.isLoad.serviceTypeId,label:"serviceTypeName","track-by":"serviceTypeId",placeholder:"Select service type"},model:{value:e.serviceTypeId,callback:function(t){e.serviceTypeId=t},expression:"serviceTypeId"}})],2),e._v(" "),s("b-form-fieldset",{attrs:{label:"Domain",horizontal:!0}},[s("template",{slot:"label"},[e._v("\n        Domain"),s("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),s("b-form-input",{attrs:{type:"text",formatter:e.lowerFomatter,required:""},model:{value:e.items.serviceDomainName,callback:function(t){e.$set(e.items,"serviceDomainName",t)},expression:"items.serviceDomainName"}})],2),e._v(" "),s("b-form-fieldset",{attrs:{label:"서비스 유형<i class='require'>*</i>",horizontal:!0}},[s("b-table",{staticClass:"sub",attrs:{"show-empty":"",items:e.items.serviceDomainList,fields:{domainPurposeCode:{label:"",class:"text-left"},sslYn:{label:"*Domain",class:"text-left"},domainPortNumber:{label:"domainPortNumber",class:"text-left"},hashingType:{label:"hashingType",class:"text-left"},action:{label:""}}},scopedSlots:e._u([{key:"domainPurposeCode",fn:function(t){return[s("multiselect",{staticClass:"noEmpty",attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.domainPurposeCode,loading:e.isLoad.domainPurposeCode},model:{value:t.item.domainPurposeCode,callback:function(s){e.$set(t.item,"domainPurposeCode",s)},expression:"row.item.domainPurposeCode"}})]}},{key:"sslYn",fn:function(t){return[s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"https://",off:"http://"},model:{value:t.item.sslYn,callback:function(s){e.$set(t.item,"sslYn",s)},expression:"row.item.sslYn"}}),e._v("\n          [uuid]."+e._s(e.items.serviceDomainName)+"\n        ")]}},{key:"domainPortNumber",fn:function(t){return[s("b-form-input",{attrs:{type:"text",required:""},model:{value:t.item.domainPortNumber,callback:function(s){e.$set(t.item,"domainPortNumber",s)},expression:"row.item.domainPortNumber"}}),e._v(" "),s("div",{staticClass:"invalid-tooltip"},[e._v(e._s(e.$valid.msg.require))])]}},{key:"hashingType",fn:function(t){return[s("multiselect",{staticClass:"noEmpty",attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.hashingType,loading:e.isLoad.hashingType},model:{value:t.item.hashingType,callback:function(s){e.$set(t.item,"hashingType",s)},expression:"row.item.hashingType"}})]}},{key:"action",fn:function(t){return[s("span",{staticClass:"ico"},[0===t.index?s("button",{attrs:{type:"button"},on:{click:function(t){e.onAddRow("serviceDomainList")}}},[s("i",{staticClass:"fa fa-plus-circle"})]):e._e(),e._v(" "),t.index>0?s("button",{attrs:{type:"button"},on:{click:function(s){e.onDelRow("serviceDomainList",t.index)}}},[s("i",{staticClass:"fa fa-times-circle"})]):e._e()])]}}])})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"CNAME 사용여부",horizontal:!0}},[s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.items.cnameUseYn,callback:function(t){e.$set(e.items,"cnameUseYn",t)},expression:"items.cnameUseYn"}})],1),e._v(" "),e.items.cnameUseYn?s("b-form-fieldset",{attrs:{label:"CNAME 도메인<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-input",{attrs:{type:"text",required:""},model:{value:e.items.cnameDomainName,callback:function(t){e.$set(e.items,"cnameDomainName",t)},expression:"items.cnameDomainName"}})],1):e._e(),e._v(" "),s("b-form-fieldset",{attrs:{label:"SSL 인증서",horizontal:!0}},[s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.items.sslCertUseYn,callback:function(t){e.$set(e.items,"sslCertUseYn",t)},expression:"items.sslCertUseYn"}})],1),e._v(" "),e.items.sslCertUseYn?s("b-form-fieldset",{attrs:{label:"SSL 인증서<i class='require'>*</i>",horizontal:!0}},[s("div",{staticClass:"form-in-view"},[s("b-form-fieldset",{attrs:{label:"Cert<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:2,required:""},model:{value:e.items.sslCert,callback:function(t){e.$set(e.items,"sslCert",t)},expression:"items.sslCert"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"Key<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:2,required:""},model:{value:e.items.sslCertKey,callback:function(t){e.$set(e.items,"sslCertKey",t)},expression:"items.sslCertKey"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"만료일","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-input",{attrs:{type:"date",required:""},model:{value:e.items.sslCertExpireDate,callback:function(t){e.$set(e.items,"sslCertExpireDate",t)},expression:"items.sslCertExpireDate"}})],1)],1)]):e._e(),e._v(" "),s("b-form-fieldset",{attrs:{label:"사용여부",horizontal:!0}},[s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.items.serviceUseYn,callback:function(t){e.$set(e.items,"serviceUseYn",t)},expression:"items.serviceUseYn"}})],1)],1),e._v(" "),s("div",{staticClass:"page-btn"},[s("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Service 관리"}}},[e._v("취소")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmit}},[e._v("저장")])],1)],1)},a=[],o={render:i,staticRenderFns:a};t.a=o},639:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(1110),a=s(1111),o=s(15),n=o(i.a,a.a,null,null,null);t.default=n.exports}});