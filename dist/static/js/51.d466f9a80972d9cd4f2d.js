webpackJsonp([51],{1138:function(e,t,i){"use strict";function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=i(181),l=i(180),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e};t.a={name:"service",components:{ContentHeader:o.a,cSwitch:l.a},data:function(){var e;return{fields:{policyTypeCode:{label:"구분"},policyTypeName:{label:"항목",class:"text-left"},policyWarningThreshold:{label:"임계치",class:"text-left"},policyWarningDurationTime:{label:"지속시간",class:"text-left"},policyCriticalThreshold:{label:"임계치",class:"text-left"},policyCriticalDurationTime:{label:"지속시간",class:"text-left"}},items:(e={alarmPolicyId:null,serviceType:null,componentTypeCode:null,groupNames:null,alarmTypeCode:null,alarmPolicyUseYn:!0,modifyDatetime:null,modifyId:null,alarmPolicyCompList:[],alarmPolicyGroupList:[],checkList:[],groupIds:[],selectGroup:[],possibleGroup:[],selectGroupList:[],possibleGroupList:[],selectGroupListEdit:[],possibleGroupListEdit:[]},s(e,"alarmTypeCode",[]),s(e,"popId",null),e),code:{componentTypeCode:[],groupId:[],alarmTypeCode:[],popId:[]},isLoad:{componentTypeCode:!0,groupId:!0,alarmTypeCode:!0,popId:!0},inValidForm:!1}},computed:{componentTypeCode:{get:function(){var e=this;return this.code.componentTypeCode.find(function(t){return t.code===e.items.componentTypeCode})||null},set:function(e){this.items.componentTypeCode=null!==e?e.code:null}},alarmTypeCode:{get:function(){var e=this;return this.code.alarmTypeCode.find(function(t){return t.code===e.items.alarmTypeCode})||null},set:function(e){this.items.alarmTypeCode=null!==e?e.code:null}},popId:{get:function(){var e=this;return this.code.popId.find(function(t){return t.popId===e.items.popId})||null},set:function(e){this.items.popId=null!==e?e.popId:null}}},created:function(){var e=this,t=[];this.$https.get("/monitoring/policies/check").then(function(i){e.items.alarmPolicyCompList=i.data.items,i.data.items.forEach(function(e){e.alarmPolicyId?(e.alarmPolicyCompUseYn=!0,t.push(e)):e.alarmPolicyCompUseYn=!1}),e.items.checkList=t,e.items=a({},e.items,i.data.items)}),this.$https.get("/system/commonCode",{q:{groupCode:"COMPONENT_TYPE"}}).then(function(t){e.isLoad.componentTypeCode=!1,e.code.componentTypeCode=t.data.items}),this.$https.get("/system/commonCode",{q:{groupCode:"ALARM_TYPE_CODE"}}).then(function(t){e.isLoad.alarmTypeCode=!1,e.code.alarmTypeCode=t.data.items}),this.$https.get("/setting/operators/groups").then(function(t){e.isLoad.groupId=!1,t.data.items.forEach(function(t){e.items.possibleGroupListEdit.push({text:t.groupName,value:t.groupId})})}),this.$https.get("/pops").then(function(t){e.isLoad.popId=!1,e.code.popId=t.data.items,e.code.popId.push({popId:0,popName:"공통"})})},methods:{onSubmit:function(){var e=this;this.items.groupIds=this.items.selectGroupList,0!==this.items.groupIds.length?this.$https.post("/monitoring/policies",this.items).then(function(t){e.$router.push({name:"Notification 관리"})}).catch(function(e){console.log(e),alert(e.response.data.error.message)}):alert("수신 그룹을 추가하세요.")},validate:function(e){},onChecked:function(e){var t=this;e.alarmPolicyCompUseYn?this.items.checkList.forEach(function(i,s){i.policyTypeCode===e.policyTypeCode&&t.items.checkList.splice(s,1)}):this.items.checkList.push(e)},getPossibleGroupNames:function(){var e=[];return this.code.groupId.forEach(function(t){e.push({text:t.groupName,value:t.groupId})}),e},selectAllGroup:function(){0==this.items.selectGroup.length?this.items.selectGroup=this.items.selectGroupList:this.items.selectGroup=[]},possibleAllGroup:function(){0==this.items.possibleGroup.length?this.items.possibleGroup=this.items.possibleGroupList:this.items.possibleGroup=[]},updateSelectGroup:function(){var e=this;if(this.items.possibleGroup){for(var t=0;t<this.items.possibleGroupListEdit.length;t++)this.items.possibleGroup.forEach(function(i){e.items.possibleGroupListEdit[t].value==i&&(e.items.selectGroupListEdit.push(e.items.possibleGroupListEdit[t]),e.items.possibleGroupListEdit.splice(t,1))});this.items.selectGroupList=[],this.items.selectGroupListEdit.filter(function(t){var i=t.value;e.items.selectGroupList.push(i)}),this.items.possibleGroupList=[],this.items.possibleGroupListEdit.filter(function(t){var i=t.value;e.items.possibleGroupList.push(i)}),this.items.selectGroup=[],this.items.possibleGroup=[]}},deleteSelectGroup:function(){var e=this;if(this.items.selectGroup){for(var t=0;t<this.items.selectGroupListEdit.length;t++)this.items.selectGroup.forEach(function(i){e.items.selectGroupListEdit[t].value==i&&(e.items.possibleGroupListEdit.push(e.items.selectGroupListEdit[t]),e.items.selectGroupListEdit.splice(t,1))});this.items.selectGroupList=[],this.items.selectGroupListEdit.filter(function(t){var i=t.value;e.items.selectGroupList.push(i)}),this.items.possibleGroupList=[],this.items.possibleGroupListEdit.filter(function(t){var i=t.value;e.items.possibleGroupList.push(i)}),this.items.selectGroup=[],this.items.possibleGroup=[]}},removeSelectGroup:function(){this.items.selectGroup&&(this.items.selectGroup=[])},removePossibleGroup:function(){this.items.possibleGroup&&(this.items.possibleGroup=[])}}}},1139:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"animated fadeIn"},[i("div",{staticClass:"collapse-title"},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[i("i",{staticClass:"fa"}),e._v("\n      기본정보\n    ")])],1),e._v(" "),i("b-collapse",{attrs:{id:"formDefault",visible:""}},[i("b-form",{staticClass:"formView",attrs:{validated:e.inValidForm,novalidate:""}},[i("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          국사"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("multiselect",{attrs:{showLabels:!1,searchable:!1,options:e.code.popId,loading:e.isLoad.popId,label:"popName","track-by":"popId"},model:{value:e.popId,callback:function(t){e.popId=t},expression:"popId"}})],2),e._v(" "),i("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          ServerType"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("multiselect",{attrs:{showLabels:!1,searchable:!1,options:e.code.componentTypeCode,loading:e.isLoad.componentTypeCode,label:"codeName","track-by":"code"},model:{value:e.componentTypeCode,callback:function(t){e.componentTypeCode=t},expression:"componentTypeCode"}})],2),e._v(" "),i("b-form-fieldset",{attrs:{description:"[!] Shift 버튼을 누른 상태에서 선택하면 여러 항목을 동시에 선택할 수 있습니다.",horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          수신그룹"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"select전체선택","data-original-title":"전체선택"},on:{click:e.selectAllGroup}},[e._v("전체선택")]),e._v(" "),i("b-form-select",{staticStyle:{width:"150px",height:"80px"},attrs:{multiple:"","select-size":4,options:e.items.selectGroupListEdit},on:{change:e.removePossibleGroup},model:{value:e.items.selectGroup,callback:function(t){e.$set(e.items,"selectGroup",t)},expression:"items.selectGroup"}}),e._v(" "),i("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"추가","data-original-title":"추가"},on:{click:e.updateSelectGroup}},[e._v("◀")]),e._v(" "),i("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"제거","data-original-title":"제거"},on:{click:e.deleteSelectGroup}},[e._v("▶")]),e._v(" "),i("b-form-select",{staticStyle:{width:"150px",height:"80px"},attrs:{multiple:"","select-size":10,options:e.items.possibleGroupListEdit},on:{change:e.removeSelectGroup},model:{value:e.items.possibleGroup,callback:function(t){e.$set(e.items,"possibleGroup",t)},expression:"items.possibleGroup"}}),e._v(" "),i("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"possible전체선택","data-original-title":"전체선택"},on:{click:e.possibleAllGroup}},[e._v("전체선택")])],2),e._v(" "),i("b-form-fieldset",{attrs:{horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          알림 방법"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("multiselect",{attrs:{showLabels:!1,searchable:!1,options:e.code.alarmTypeCode,loading:e.isLoad.alarmTypeCode,label:"codeName","track-by":"code"},model:{value:e.alarmTypeCode,callback:function(t){e.alarmTypeCode=t},expression:"alarmTypeCode"}})],2),e._v(" "),i("b-form-fieldset",{attrs:{horizontal:!0}},[i("template",{slot:"label"},[e._v("\n          상태"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.items.alarmPolicyUseYn,callback:function(t){e.$set(e.items,"alarmPolicyUseYn",t)},expression:"items.alarmPolicyUseYn"}})],2)],1)],1),e._v(" "),i("div",{staticClass:"collapse-title"},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.alarmDetailInfo",modifiers:{alarmDetailInfo:!0}}],staticClass:"btn-collapse"},[i("i",{staticClass:"fa"}),e._v("\n      알림 상세 정보\n    ")])],1),e._v(" "),i("b-collapse",{attrs:{id:"alarmDetailInfo",visible:""}},[i("b-form",{staticClass:"formView"},[i("section",{staticClass:"board"},[i("b-table",{attrs:{"show-empty":"",items:e.items.alarmPolicyCompList,fields:e.fields},scopedSlots:e._u([{key:"policyTypeName",fn:function(t){return[i("b-form-checkbox",{on:{change:function(i){e.onChecked(t.item)}},model:{value:t.item.alarmPolicyCompUseYn,callback:function(i){e.$set(t.item,"alarmPolicyCompUseYn",i)},expression:"row.item.alarmPolicyCompUseYn"}}),e._v("   \n          "+e._s(t.item.policyTypeName)+"\n        ")]}},{key:"policyWarningThreshold",fn:function(t){return[i("b-form-input",{staticStyle:{width:"80px"},attrs:{type:"number",disabled:!t.item.alarmPolicyCompUseYn,required:""},model:{value:t.item.policyWarningThreshold,callback:function(i){e.$set(t.item,"policyWarningThreshold",i)},expression:"row.item.policyWarningThreshold"}}),e._v("이상\n        ")]}},{key:"policyWarningDurationTime",fn:function(t){return[i("b-form-input",{staticStyle:{width:"80px"},attrs:{type:"number",disabled:!t.item.alarmPolicyCompUseYn,required:""},model:{value:t.item.policyWarningDurationTime,callback:function(i){e.$set(t.item,"policyWarningDurationTime",i)},expression:"row.item.policyWarningDurationTime"}}),e._v(e._s(t.item.policyWarningDurationTimeUnitName)+"\n        ")]}},{key:"policyCriticalThreshold",fn:function(t){return[i("b-form-input",{staticStyle:{width:"80px"},attrs:{type:"number",disabled:!t.item.alarmPolicyCompUseYn,required:""},model:{value:t.item.policyCriticalThreshold,callback:function(i){e.$set(t.item,"policyCriticalThreshold",i)},expression:"row.item.policyCriticalThreshold"}}),e._v("이상\n        ")]}},{key:"policyCriticalDurationTime",fn:function(t){return[i("b-form-input",{staticStyle:{width:"80px"},attrs:{type:"number",disabled:!t.item.alarmPolicyCompUseYn,required:""},model:{value:t.item.policyCriticalDurationTime,callback:function(i){e.$set(t.item,"policyCriticalDurationTime",i)},expression:"row.item.policyCriticalDurationTime"}}),e._v(e._s(t.item.policyCriticalDurationTimeUnitName)+"\n        ")]}}])})],1)])],1),e._v(" "),i("div",{staticClass:"page-btn"},[i("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Notification 관리"}}},[e._v("취소")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmit}},[e._v("저장")])],1)],1)},o=[],l={render:s,staticRenderFns:o};t.a=l},652:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1138),o=i(1139),l=i(15),a=l(s.a,o.a,null,null,null);t.default=a.exports}});