webpackJsonp([35],{1e3:function(t,e,i){"use strict";e.a={jdd:{LEFT:"left",RIGHT:"right",EQUALITY:"eq",TYPE:"type",MISSING:"missing",diffs:[],requestCount:0},createConfig:function(){return{out:"",indent:-1,currentPath:[],paths:[],line:1}},findDiffs:function(t,e,i,s){t.currentPath.push("/"),i.currentPath.push("/");var n;if(e.length<s.length)for(n in s)s.hasOwnProperty(n)&&(e[n],e.hasOwnProperty(n)||this.jdd.diffs.push(this.generateDiff(t,this.generatePath(t),i,this.generatePath(i,"/"+n),"The right side of this object has more items than the left side",this.jdd.MISSING)));for(n in e)e.hasOwnProperty(n)&&(e[n],t.currentPath.push(n),s.hasOwnProperty(n)?(i.currentPath.push(n),this.diffVal(e[n],t,s[n],i),i.currentPath.pop()):this.jdd.diffs.push(this.generateDiff(t,this.generatePath(t),i,this.generatePath(i),"Missing property <code>"+n+"</code> from the object on the right side",this.jdd.MISSING)),t.currentPath.pop());t.currentPath.pop(),i.currentPath.pop();for(n in s)s.hasOwnProperty(n)&&(e[n],e.hasOwnProperty(n)||this.jdd.diffs.push(this.generateDiff(t,this.generatePath(t),i,this.generatePath(i,n),"Missing property <code>"+n+"</code> from the object on the left side",this.jdd.MISSING)))},formatAndDecorate:function(t,e){if(_.isArray(e))return void this.formatAndDecorateArray(t,e);this.startObject(t),t.currentPath.push("/");var i=this.getSortedProperties(e);_.each(i,function(i){t.out+=this.newLine(t)+this.getTabs(t.indent)+'"'+this.unescapeString(i)+'": ',t.currentPath.push(i),t.paths.push({path:this.generatePath(t),line:t.line}),this.formatVal(e[i],t),t.currentPath.pop()},this),this.finishObject(t),t.currentPath.pop()},startObject:function(t){t.indent++,t.out+="{",0===t.paths.length&&t.paths.push({path:this.generatePath(t),line:t.line}),0===t.indent&&t.indent++},generatePath:function(t,e){var i="";return _.each(t.currentPath,function(t){i+=t}),e&&(i+="/"+e),0===i.length?"/":i},getSortedProperties:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e=e.sort(function(t,e){return t.localeCompare(e)})},newLine:function(t){return t.line++,"\n"},getTabs:function(t){for(var e="",i=0;i<t;i++)e+="    ";return e},unescapeString:function(t){return t?t.replace("\\","\\\\").replace('"','\\"').replace("\n","\\n").replace("\b","\\b").replace("\f","\\f").replace("\r","\\r").replace("\t","\\t"):t},formatVal:function(t,e){_.isArray(t)?(e.out+="[",e.indent++,_.each(t,function(t,i){e.out+=this.newLine(e)+this.getTabs(e.indent),e.paths.push({path:this.generatePath(e,"["+i+"]"),line:e.line}),e.currentPath.push("/["+i+"]"),this.formatVal(t,e),e.currentPath.pop()},this),this.removeTrailingComma(e),e.indent--,e.out+=this.newLine(e)+this.getTabs(e.indent)+"],"):_.isObject(t)?this.formatAndDecorate(e,t):_.isString(t)?e.out+='"'+this.unescapeString(t)+'",':_.isNumber(t)?e.out+=t+",":_.isBoolean(t)?e.out+=t+",":_.isNull(t)&&(e.out+="null,")},finishObject:function(t){0===t.indent&&t.indent--,this.removeTrailingComma(t),t.indent--,t.out+=this.newLine(t)+this.getTabs(t.indent)+"}",0!==t.indent?t.out+=",":t.out+=this.newLine(t)},removeTrailingComma:function(t){","===t.out.charAt(t.out.length-1)&&(t.out=t.out.substring(0,t.out.length-1))},diffVal:function(t,e,i,s){_.isArray(t)?this.diffArray(t,e,i,s):_.isObject(t)?_.isArray(i)||_.isString(i)||_.isNumber(i)||_.isBoolean(i)||_.isNull(i)?this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s),"Both types should be objects",this.jdd.TYPE)):this.findDiffs(e,t,s,i):_.isString(t)?_.isString(i)?t!==i&&this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s),"Both sides should be equal strings",this.jdd.EQUALITY)):this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s),"Both types should be strings",this.jdd.TYPE)):_.isNumber(t)?_.isNumber(i)?t!==i&&this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s),"Both sides should be equal numbers",this.jdd.EQUALITY)):this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s),"Both types should be numbers",this.jdd.TYPE)):_.isBoolean(t)?this.diffBool(t,e,i,s):_.isNull(t)&&!_.isNull(i)&&this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s),"Both types should be nulls",this.jdd.TYPE))},diffArray:function(t,e,i,s){if(!_.isArray(i))return void this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s),"Both types should be arrays",this.jdd.TYPE));if(t.length<i.length)for(var n=t.length;n<i.length;n++)this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e),s,this.generatePath(s,"["+n+"]"),"Missing element <code>"+n+"</code> from the array on the left side",this.jdd.MISSING));_.each(t,function(n,a){i.length<=a?this.jdd.diffs.push(this.generateDiff(e,this.generatePath(e,"["+a+"]"),s,this.generatePath(s),"Missing element <code>"+a+"</code> from the array on the right side",this.jdd.MISSING)):(e.currentPath.push("/["+a+"]"),s.currentPath.push("/["+a+"]"),_.isArray(i)&&this.diffVal(t[a],e,i[a],s),e.currentPath.pop(),s.currentPath.pop())},this)},generateDiff:function(t,e,i,s,n,a){"/"!==e&&"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"!==s&&"/"===s.charAt(s.length-1)&&(s=s.substring(0,s.length-1));var o=_.find(t.paths,function(t){return t.path===e}),r=_.find(i.paths,function(t){return t.path===s});if(!o)throw"Unable to find line number for ("+n+"): "+e;if(!r)throw"Unable to find line number for ("+n+"): "+s;return{path1:o,path2:r,type:a,msg:n}},formatPRETags:function(){_.each(document.querySelectorAll("pre"),function(t){var e=document.createElement("pre");e.className="codeBlock";var i=document.createElement("div");e.append(i);var s=function(t,e){var s=document.createElement("div");s.className="codeLine line"+(e+1);var n=document.createElement("span");n.className="code",n.textContent=t,s.append(n),i.append(s)},n=t.textContent.split("\n");_.each(n,s),e.className=t.className,e.id=t.id,t.replaceWith(e)})},processDiffs:function(){_.each(this.jdd.diffs,function(t,e){var i=document.querySelector("pre.left div.line"+t.path1.line+" span.code");i.classList.add(t.type),i.classList.add("diff");var s=document.querySelector("pre.right div.line"+t.path2.line+" span.code");s.classList.add(t.type),s.classList.add("diff")}),this.jdd.diffs=this.jdd.diffs.sort(function(t,e){return t.path1.line-e.path1.line})},highlightDiff:function(t){this.handleDiffClick(this.jdd.diffs[t].path1.line,this.jdd.BOTH)},handleDiffClick:function(t,e){var i=_.filter(this.jdd.diffs,function(i){return e===this.jdd.LEFT?t===i.path1.line:e===this.jdd.RIGHT?t===i.path2.line:t===i.path1.line||t===i.path2.line},this);document.querySelectorAll("pre.left span.code").forEach(function(t){t.classList.remove("selected")}),document.querySelectorAll("pre.right span.code").forEach(function(t){t.classList.remove("selected")}),_.each(i,function(t){document.querySelector("pre.left div.line"+t.path1.line+" span.code").classList.add("selected"),document.querySelector("pre.right div.line"+t.path2.line+" span.code").classList.add("selected")}),e!==this.jdd.LEFT&&e!==this.jdd.RIGHT||(this.currentDiff=_.findIndex(this.jdd.diffs,function(e){return e.path1.line===t})),-1===this.currentDiff&&(this.currentDiff=_.findIndex(this.jdd.diffs,function(e){return e.path2.line===t}))}}},1053:function(t,e,i){"use strict";var s=i(181),n=i(180),a=i(1e3),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a={name:"edgeCoreConfigDetail",props:["id"],components:{ContentHeader:s.a,cSwitch:n.a},data:function(){return{name:"Edge 상세",hostName:"",ip:"",newJsonObject:"",oldJsonObject:"",configJson:{headers:[{new:null,old:null}]},originItems:{},items:{edgeCoreConfigId:0,edgeId:0,edgeTypeCode:null,originalConfigText:null,originalConfigTextAlignmentView:null,edgeCoreConfigApplyYn:!1,modifyHistReason:"",processStateCodeName:null,processStateCode:null,processId:null},code:{edgeTypeCode:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},isLoad:{edgeTypeCode:!0},isEdit:!1,isFirstEdit:!1,isCreate:!1,isModalHistory:!1,isOriginalConfigTextValidateFlag:!1,isHistory:!1,inValidForm:!1}},computed:{edgeTypeCode:{get:function(){var t=this;return this.code.edgeTypeCode.find(function(e){return e.code===t.items.edgeTypeCode})||null},set:function(t){this.items.edgeTypeCode=null!==t?t.code:null}},isProcessComplete:function(){return null===this.items.processId||null!==this.items.processStateCode&&""!==this.items.processStateCode&&"PROCESS_STATE_02"===this.items.processStateCode},valid:function(){return{edgeTypeCode:null!==this.items.edgeTypeCode,originalConfigText:null!==this.items.originalConfigText||!this.isOriginalConfigTextValidateFlag}}},created:function(){var t=this,e=this.$route.query.histories,i=void 0!==e?"/edges/"+this.id+"/cores/histories/"+e:"/edges/"+this.id+"/cores";e&&(document.querySelector("body.app").classList.add("history-mode"),this.isHistory=!0),this.$https.get("/edges/"+this.id).then(function(e){var i=e.data.items,s=i.hostName,n=i.ip;t.hostName=s,t.ip=n}),this.$https.get(i).then(function(e){if(null===e.data.items)t.isCreate=!0,t.isEdit=!0,t.isFirstEdit=!0;else{var i=JSON.parse(e.data.items.originalConfigText);t.items=r({},t.items,e.data.items,{originalConfigText:JSON.stringify(i),originalConfigTextAlignmentView:JSON.stringify(i,null,4)}),t.oldJsonObject=i,t.originItems=JSON.parse(JSON.stringify(t.items))}}).catch(function(t){console.log(t)}),this.$https.get("/system/commonCode",{q:{groupCode:"EDGE_TYPE"}}).then(function(e){t.isLoad.edgeTypeCode=!1,t.code.edgeTypeCode=e.data.items})},methods:{fileOnChange:function(t){var e=new FileReader,i=function(t){var e=this.isJson(t.target.result);e?(this.newJsonObject=e,this.items.originalConfigText=JSON.stringify(e),this.jsonDifferentCompare()):alert("NOT JSON")};e.onload=i.bind(this),e.readAsText(t.target.files[0])},isJson:function(t){try{var e=JSON.parse(t);if(e&&"object"===(void 0===e?"undefined":o(e)))return e}catch(t){}return!1},jsonDifferentCompare:function(){a.a.jdd.diffs=[];var t=a.a.createConfig();if(a.a.formatAndDecorate(t,this.newJsonObject),document.getElementById("newJson").textContent=t.out,this.isEdit&&!this.isFirstEdit){var e=a.a.createConfig();a.a.formatAndDecorate(e,this.oldJsonObject),document.getElementById("oldJson").textContent=e.out,a.a.formatPRETags(),t.currentPath=[],e.currentPath=[],a.a.diffVal(this.newJsonObject,t,this.oldJsonObject,e),a.a.processDiffs(),a.a.jdd.diffs.length>0&&(a.a.highlightDiff(0),a.a.currentDiff=0);var i=document.querySelectorAll("span.diff");Array.prototype.forEach.call(i,function(t){t.style.background="red",t.style.color="white"})}},onEdit:function(){this.isEdit=!0},onView:function(){this.isEdit=!1,this.items=JSON.parse(JSON.stringify(this.originItems))},onSubmit:function(){var t=this,e=this.items,i=e.edgeTypeCode,s=e.modifyHistReason,n=e.originalConfigText,a={edgeTypeCode:i,modifyHistReason:s,originalConfigText:n},o=this.$valid.all(a),r=this.isCreate?function(){return t.$https.post("/edges/"+t.id+"/cores",a)}:function(){return t.$https.put("/edges/"+t.id+"/cores",a)};this.inValidForm=!o,o?r().then(function(){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)}):null===this.items.originalConfigText&&(this.isOriginalConfigTextValidateFlag=!0)},onDeploy:function(){alert("배포 미개발")},getHistoryLink:function(t){return"#/configuration/edges/edge/"+this.id+"/core?histories="+t},showHistory:function(){var t=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/edges/"+this.id+"/cores/histories").then(function(e){t.history.items=e.data.items})}}}},1054:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"animated fadeIn"},[i("content-header",{attrs:{title:t.hostName,small:t.ip,name:t.name}}),t._v(" "),i("div",{staticClass:"collapse-title"},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[i("i",{staticClass:"fa"}),t._v("\n      기본정보\n    ")])],1),t._v(" "),i("b-collapse",{attrs:{id:"formDefault",visible:""}},[i("b-form",{staticClass:"formView",attrs:{validated:t.inValidForm,novalidate:""}},[t.isEdit?i("b-form-fieldset",{attrs:{"invalid-feedback":t.$valid.msg.select,horizontal:!0}},[i("template",{slot:"label"},[t._v("\n          Edge 구분"),i("i",{staticClass:"require"},[t._v("*")])]),t._v(" "),i("multiselect",{staticClass:"inline",class:{invalid:!t.valid.edgeTypeCode},staticStyle:{width:"156px"},attrs:{showLabels:!1,searchable:!1,options:t.code.edgeTypeCode,loading:t.isLoad.edgeTypeCode,"track-by":"code",label:"codeName",placeholder:"선택"},model:{value:t.edgeTypeCode,callback:function(e){t.edgeTypeCode=e},expression:"edgeTypeCode"}})],2):i("b-form-fieldset",{attrs:{label:"Edge 구분",horizontal:!0}},[i("b-form-input",{attrs:{value:t.items.edgeTypeCodeName,type:"text",plaintext:""}})],1),t._v(" "),t.isEdit?i("b-form-fieldset",{attrs:{label:"Config 파일",horizontal:!0}},[i("input",{attrs:{type:"file"},on:{change:t.fileOnChange}})]):t._e(),t._v(" "),t.isEdit&&!t.isFirstEdit?i("b-form-fieldset",{attrs:{"invalid-feedback":t.$valid.msg.require,label:"Config JSON",horizontal:!0}},[i("template",{slot:"label"},[t._v("\n          Config JSON"),i("i",{staticClass:"require"},[t._v("*")])]),t._v(" "),i("b-table",{staticClass:"sub",attrs:{"show-empty":"",items:t.configJson.headers},scopedSlots:t._u([{key:"new",fn:function(e){return[i("pre",{staticClass:"code left text-left",staticStyle:{height:"380px"},attrs:{id:"newJson"}},[t._v(t._s(t.items.originalConfigTextAlignmentView))])]}},{key:"old",fn:function(e){return[i("pre",{staticClass:"code right text-left",staticStyle:{height:"380px"},attrs:{id:"oldJson"}},[t._v(t._s(t.items.originalConfigTextAlignmentView))])]}}])})],2):t._e(),t._v(" "),t.isEdit&&t.isFirstEdit?i("b-form-fieldset",{attrs:{"invalid-feedback":t.$valid.msg.require,label:"Config JSON",horizontal:!0}},[i("template",{slot:"label"},[t._v("\n          Config JSON"),i("i",{staticClass:"require"},[t._v("*")])]),t._v(" "),i("pre",{staticClass:"code left text-left form-control",class:{"is-invalid":!t.valid.originalConfigText},staticStyle:{height:"380px !important","max-width":"100% !important"},attrs:{id:"newJson"}})],2):t._e(),t._v(" "),t.isEdit?t._e():i("b-form-fieldset",{attrs:{label:"적용여부",horizontal:!0}},[i("span",{staticClass:"badge",class:{primary:t.items.edgeCoreConfigApplyYn}},[t._v("\n          "+t._s(t.items.edgeCoreConfigApplyYn?"적용":"미적용")+"\n        ")])]),t._v(" "),t.isEdit?t._e():i("b-form-fieldset",{attrs:{label:"Config JSON",horizontal:!0}},[i("pre",{staticClass:"code",staticStyle:{height:"330px"}},[t._v(t._s(t.items.originalConfigTextAlignmentView))])]),t._v(" "),t.isEdit?i("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":t.$valid.msg.require,horizontal:!0}},[i("b-form-textarea",{attrs:{required:"",rows:6},model:{value:t.items.modifyHistReason,callback:function(e){t.$set(t.items,"modifyHistReason",e)},expression:"items.modifyHistReason"}})],1):t._e()],1)],1),t._v(" "),t.isEdit?t._e():i("div",{staticClass:"collapse-title"},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formHistory",modifiers:{formHistory:!0}}],staticClass:"btn-collapse"},[i("i",{staticClass:"fa"}),t._v("\n      처리이력\n    ")])],1),t._v(" "),t.isEdit?t._e():i("b-collapse",{attrs:{id:"formHistory",visible:""}},[i("b-form",{staticClass:"formView"},[i("div",{staticClass:"form-row"},[i("b-form-fieldset",{attrs:{label:"등록일시",horizontal:!0}},[i("b-form-input",{attrs:{value:t.items.createDateTime,plaintext:"",type:"text"}})],1),t._v(" "),i("b-form-fieldset",{attrs:{label:"등록자",horizontal:!0}},[i("b-form-input",{attrs:{value:t.items.createId,plaintext:"",type:"text"}})],1)],1),t._v(" "),i("div",{staticClass:"form-row"},[i("b-form-fieldset",{attrs:{label:"수정일시",horizontal:!0}},[i("b-form-input",{attrs:{value:t.items.modifyDateTime,plaintext:"",type:"text"}})],1),t._v(" "),i("b-form-fieldset",{attrs:{label:"수정자",horizontal:!0}},[i("b-form-input",{attrs:{value:t.items.modifyId,plaintext:"",type:"text"}})],1)],1),t._v(" "),t.items.processId?i("b-form-fieldset",{attrs:{label:"배포상태",horizontal:!0}},[i("input",{staticClass:"form-control-plaintext",staticStyle:{width:"50px"},attrs:{type:"text",readonly:"readonly"},domProps:{value:t.items.processStateCodeName}}),t._v(" "),i("a",{staticClass:"btn btn-in-table",attrs:{href:"#/workflow/service/"+t.items.processId,target:"_blank"}},[t._v(t._s(t.items.processId))])]):t._e(),t._v(" "),t.items.processId||t.isHistory?t._e():i("b-form-fieldset",{attrs:{label:"배포상태",horizontal:!0}},[i("input",{staticClass:"form-control-plaintext",staticStyle:{width:"50px"},attrs:{type:"text",readonly:"readonly",value:"대기"}})])],1)],1),t._v(" "),t.isEdit?i("div",{staticClass:"page-btn"},[i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.onView}},[t._v("취소")]),t._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.onSubmit}},[t._v("저장")])],1):i("div",{staticClass:"page-btn"},[t.isProcessComplete?i("span",[i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.onDeploy}},[t._v("배포")]),t._v(" "),i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.showHistory}},[t._v("이력관리")]),t._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.onEdit}},[t._v("수정")])],1):i("span",[i("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.showHistory}},[t._v("이력관리")])],1)]),t._v(" "),i("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:t.isModalHistory,callback:function(e){t.isModalHistory=e},expression:"isModalHistory"}},[i("section",{staticClass:"board"},[i("b-table",{attrs:{hover:"","show-empty":"",items:t.history.items,fields:t.history.fields,"current-page":t.history.pageInfo.page,"per-page":t.history.pageInfo.size},scopedSlots:t._u([{key:"histMgmtId",fn:function(e){return[i("a",{attrs:{href:t.getHistoryLink(e.value),target:"_blank"}},[t._v("보기")])]}}])})],1),t._v(" "),i("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":t.history.pageInfo.totalCount,"per-page":t.history.pageInfo.size},model:{value:t.history.pageInfo.page,callback:function(e){t.$set(t.history.pageInfo,"page",e)},expression:"history.pageInfo.page"}}),t._v(" "),i("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.isModalHistory=!1}}},[t._v("확인")])],1)],1)],1)},n=[],a={render:s,staticRenderFns:n};e.a=a},615:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(1053),n=i(1054),a=i(15),o=a(s.a,n.a,null,null,null);e.default=o.exports}});