webpackJsonp([42],{1166:function(e,t,s){"use strict";var i=s(180),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};t.a={name:"referrer",props:["id"],components:{cSwitch:i.a},data:function(){return{name:"Scheduler 상세",originItems:{},items:{scheduleId:null,scheduleName:"",useYn:null,scheduleDesc:null,scheduleClassName:null,execCycle:null,modifyHistReason:"",secondSelect:"0",minuteSelect:{code:"*",codeName:"매분"},hourSelect:{code:"*",codeName:"매시간"},daySelect:{code:"*",codeName:"매일"},monthSelect:{code:"*",codeName:"매월"},weekSelect:{code:"?",codeName:"선택안함"}},code:{inputSectionCode:[],minuteSelect:[],hourSelect:[],daySelect:[],monthSelect:[],weekSelect:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},scheduleHistId:{label:"보기"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},isLoad:{inputSectionCode:!0,minuteSelect:!0,hourSelect:!0,daySelect:!0,monthSelect:!0,weekSelect:!0},isEdit:!1,isModalHistory:!1,modal:{open:!1,type:"done",msg:"",action:function(){}},scheduleNameExists:null,isReScheduleName:!1,inValidForm:!1}},computed:{inputSectionCode:{get:function(){var e=this;return this.code.inputSectionCode.find(function(t){return t.code===e.items.inputSectionCode})||null},set:function(e){this.items.inputSectionCode=null!==e?e.code:null}},minuteSelect:{get:function(){var e=this;return this.code.minuteSelect.find(function(t){return t.code===e.items.minuteSelect})||null},set:function(e){this.items.minuteSelect=null!==e?e.code:null}},hourSelect:{get:function(){var e=this;return this.code.hourSelect.find(function(t){return t.code===e.items.hourSelect})||null},set:function(e){this.items.hourSelect=null!==e?e.code:null}},daySelect:{get:function(){var e=this;return this.code.daySelect.find(function(t){return t.code===e.items.daySelect})||null},set:function(e){this.items.daySelect=null!==e?e.code:null}},monthSelect:{get:function(){var e=this;return this.code.monthSelect.find(function(t){return t.code===e.items.monthSelect})||null},set:function(e){this.items.monthSelect=null!==e?e.code:null}},weekSelect:{get:function(){var e=this;return this.code.weekSelect.find(function(t){return t.code===e.items.weekSelect})||null},set:function(e){this.items.weekSelect=null!==e?e.code:null}},valid:function(){return{scheduleName:null===this.scheduleNameExists&&0===this.items.scheduleName.length?this.scheduleNameExists:this.items.scheduleName.length>0&&/^[A-Za-z0-9]*$/.test(this.items.scheduleName)&&"success"===this.scheduleNameExists}},feedback:function(){return{scheduleName:!/^[A-Za-z0-9]*$/.test(this.items.scheduleName)&&this.items.scheduleName.length>0?"영문, 숫자만 입력하십시오.":null===this.scheduleNameExists&&this.items.scheduleName.length>0?"중복확인은 필수입니다.":"not"===this.scheduleNameExists?"입력된 항목이 없습니다.":"fail"===this.scheduleNameExists?"이미 등록된 Scheduler Name이 있습니다.":0===this.items.scheduleName.length?this.$valid.msg.require:""}}},created:function(){var e=this,t=this.$route.query.histories,s=void 0!==t?"/system/schedules/"+this.id+"/histories/"+t:"/system/schedules/"+this.id;t&&document.querySelector("body.app").classList.add("history-mode"),this.isLoad.minuteSelect=!1,this.code.minuteSelect.push({code:"*",codeName:"매분"});for(var i=0;i<60;i++)this.code.minuteSelect.push({code:i+"",codeName:i+"분"});this.isLoad.hourSelect=!1,this.code.hourSelect.push({code:"*",codeName:"매시간"});for(var i=0;i<24;i++)this.code.hourSelect.push({code:i+"",codeName:i+"시"});this.isLoad.daySelect=!1,this.code.daySelect.push({code:"*",codeName:"매일"});for(var i=1;i<=31;i++)this.code.daySelect.push({code:i+"",codeName:i+"일"});this.isLoad.monthSelect=!1,this.code.monthSelect.push({code:"*",codeName:"매월"});for(var i=1;i<=12;i++)this.code.monthSelect.push({code:i+"",codeName:i+"월"});this.isLoad.weekSelect=!1,this.code.weekSelect.push({code:"?",codeName:"선택안함"});for(var i=1;i<=7;i++)this.code.weekSelect.push({code:this.dayOfWeekValue(i),codeName:this.dayOfWeek(i)});this.$https.get("/system/commonCode",{q:{groupCode:"EXEC_CYCLE_INPUT_SECTION"}}).then(function(t){e.isLoad.inputSectionCode=!1,e.code.inputSectionCode=t.data.items}),this.$https.get(s).then(function(t){e.items=a({},e.items,t.data.items,{scheduleId:e.id}),e.originItems=JSON.parse(JSON.stringify(e.items))})},methods:{dayOfWeek:function(e){var t;switch(e){case 1:t="일요일";break;case 2:t="월요일";break;case 3:t="화요일";break;case 4:t="수요일";break;case 5:t="목요일";break;case 6:t="금요일";break;case 7:t="토요일"}return t},dayOfWeekValue:function(e){var t;switch(e){case 1:t="SUN";break;case 2:t="MON";break;case 3:t="TUE";break;case 4:t="WED";break;case 5:t="THU";break;case 6:t="FRI";break;case 7:t="SAT"}return t},setExecutionCycleSelect:function(){var e=this.items.execCycle.split(" ");this.items.minuteSelect=this.code.minuteSelect.find(function(t){return t.code===e[1]}),this.items.hourSelect=this.code.hourSelect.find(function(t){return t.code===e[2]}),this.items.daySelect=this.code.daySelect.find(function(t){return t.code===e[3]}),this.items.monthSelect=this.code.monthSelect.find(function(t){return t.code===e[4]}),this.items.weekSelect=this.code.weekSelect.find(function(t){return t.code===e[5]})},setExecutionCycle:function(){if("EXEC_CYCLE_INPUT_SECTION_01"===this.items.inputSectionCode){var e=this.items.secondSelect+" "+this.items.minuteSelect.code+" "+this.items.hourSelect.code+" "+this.items.daySelect.code+" "+this.items.monthSelect.code+" "+this.items.weekSelect.code;this.items.execCycle=e}},executionCycleChange:function(){"EXEC_CYCLE_INPUT_SECTION_02"===this.items.inputSectionCode?this.setExecutionCycleSelect():this.setExecutionCycle()},onEdit:function(){this.setExecutionCycleSelect(),this.isEdit=!0},onView:function(){this.isEdit=!1,this.isReScheduleName=!1,this.items=JSON.parse(JSON.stringify(this.originItems))},fetchReName:function(){this.isReScheduleName=!0},onSubmit:function(){var e=this;this.setExecutionCycle();var t={scheduleName:this.items.scheduleName,scheduleClassName:this.items.scheduleClassName,execCycle:this.items.execCycle,modifyHistReason:this.items.modifyHistReason,useYn:this.items.useYn},s=this.$valid.all(t)&&(!this.isReScheduleName||"success"===this.scheduleNameExists);this.inValidForm=!s,s&&this.$https.put("/system/schedules/"+this.id,this.items).then(function(){e.$router.go(e.$router.currentRoute)}).catch(function(e){console.log(e),alert(e.response.data.error.message)})},onDelete:function(){this.modal={open:!0,type:"error",msg:"정말로 삭제하시겠습니까?",action:this.onDeleteData}},onDeleteData:function(){var e=this;this.$https.delete("/system/schedules/"+this.id).then(function(){e.$router.push({name:"Scheduler 관리"})}).catch(function(e){console.log(e),alert(e.response.data.error.message)})},getHistoryLink:function(e){return"#/system/scheduler/"+this.id+"?histories="+e},showHistory:function(){var e=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/system/schedules/"+this.id+"/histories").then(function(t){e.history.items=t.data.items})},fetchNameExists:function(){var e=this;if(!this.items.scheduleName)return void(this.scheduleNameExists="not");this.$https.get("/system/schedules/scheduleName/exists",{scheduleName:this.items.scheduleName,scheduleId:""+this.id}).then(function(t){e.scheduleNameExists="Success"===t.data.result?"success":"fail"})}}}},1167:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"animated fadeIn"},[s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),e._v("\n      기본정보\n    ")])],1),e._v(" "),s("b-collapse",{attrs:{id:"formDefault",visible:""}},[s("b-form",{staticClass:"formView",attrs:{validated:e.inValidForm,novalidate:""}},[e.isEdit?e._e():s("b-form-fieldset",{attrs:{label:"ID",horizontal:!0}},[s("b-form-input",{attrs:{value:e.id,type:"text",plaintext:""}})],1),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.feedback.scheduleName,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Scheduler Name"),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),s("b-form-input",{attrs:{value:e.items.scheduleName,type:"text",placeholder:"Enter Scheduler Name",plaintext:!e.isReScheduleName,state:e.valid.scheduleName,required:""},on:{input:function(t){e.scheduleNameExists=null}}}),e._v(" "),e.isEdit&&!e.isReScheduleName?s("b-button",{attrs:{variant:"in-table"},on:{click:e.fetchReName}},[e._v("재입력")]):e._e(),e._v(" "),e.isEdit&&e.isReScheduleName?s("b-button",{attrs:{variant:"in-table"},on:{click:e.fetchNameExists}},[e._v("중복확인")]):e._e(),e._v(" "),null!==e.scheduleNameExists?s("span",{staticClass:"ico ml-2 mid"},["success"===e.scheduleNameExists?s("i",{staticClass:"fa fa-check-circle"}):e._e(),e._v(" "),"fail"===e.scheduleNameExists?s("i",{staticClass:"fa fa-times-circle"}):e._e()]):e._e()],2),e._v(" "),s("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("template",{slot:"label"},[e._v("\n          Class Name"),e.isEdit?s("i",{staticClass:"require"},[e._v("*")]):e._e()]),e._v(" "),s("b-form-input",{attrs:{value:e.items.scheduleClassName,type:"text",placeholder:"Enter Class Name",plaintext:!e.isEdit,required:""}})],2),e._v(" "),s("b-form-fieldset",{attrs:{label:"실행주기",horizontal:!0}},[e.isEdit?s("b-form-radio-group",{attrs:{options:e.code.inputSectionCode,name:"inputSectionCode","value-field":"code","text-field":"codeName"},on:{change:e.executionCycleChange},model:{value:e.items.inputSectionCode,callback:function(t){e.$set(e.items,"inputSectionCode",t)},expression:"items.inputSectionCode"}}):e._e(),e._v(" "),e.isEdit?e._e():s("b-form-input",{attrs:{value:e.items.execCycle,type:"text",plaintext:""}}),e._v(" "),e.isEdit&&"EXEC_CYCLE_INPUT_SECTION_02"===e.items.inputSectionCode?s("b-form-input",{attrs:{value:e.items.execCycle,type:"text",placeholder:"Enter Execution Cycle",required:""}}):e._e(),e._v(" "),e.isEdit&&"EXEC_CYCLE_INPUT_SECTION_01"===e.items.inputSectionCode?s("div",[e._v("\n          분\n          "),s("multiselect",{staticClass:"noEmpty",staticStyle:{width:"50px"},attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.minuteSelect},model:{value:e.items.minuteSelect,callback:function(t){e.$set(e.items,"minuteSelect",t)},expression:"items.minuteSelect"}}),e._v("\n          시\n          "),s("multiselect",{staticClass:"noEmpty",staticStyle:{width:"50px"},attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.hourSelect},model:{value:e.items.hourSelect,callback:function(t){e.$set(e.items,"hourSelect",t)},expression:"items.hourSelect"}}),e._v("\n          일\n          "),s("multiselect",{staticClass:"noEmpty",staticStyle:{width:"50px"},attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.daySelect},model:{value:e.items.daySelect,callback:function(t){e.$set(e.items,"daySelect",t)},expression:"items.daySelect"}}),e._v("\n          월\n          "),s("multiselect",{staticClass:"noEmpty",staticStyle:{width:"50px"},attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.monthSelect},model:{value:e.items.monthSelect,callback:function(t){e.$set(e.items,"monthSelect",t)},expression:"items.monthSelect"}}),e._v("\n          주\n          "),s("multiselect",{staticClass:"noEmpty",staticStyle:{width:"50px"},attrs:{label:"codeName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.weekSelect},model:{value:e.items.weekSelect,callback:function(t){e.$set(e.items,"weekSelect",t)},expression:"items.weekSelect"}})],1):e._e()],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"설명",horizontal:!0}},[s("b-form-textarea",{attrs:{rows:6,plaintext:!e.isEdit},model:{value:e.items.scheduleDesc,callback:function(t){e.$set(e.items,"scheduleDesc",t)},expression:"items.scheduleDesc"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"사용여부",horizontal:!0}},[e.isEdit?s("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.items.useYn,callback:function(t){e.$set(e.items,"useYn",t)},expression:"items.useYn"}}):s("span",{staticClass:"badge",class:{primary:e.items.useYn}},[e._v(e._s(e.items.useYn?"사용":"미사용")+"\n        ")])],1),e._v(" "),e.isEdit?s("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":e.$valid.msg.require,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:6,required:""},model:{value:e.items.modifyHistReason,callback:function(t){e.$set(e.items,"modifyHistReason",t)},expression:"items.modifyHistReason"}})],1):e._e()],1)],1),e._v(" "),e.isEdit?e._e():s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formHistory",modifiers:{formHistory:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),e._v("\n      처리이력\n    ")])],1),e._v(" "),e.isEdit?e._e():s("b-collapse",{attrs:{id:"formHistory",visible:""}},[s("b-form",{staticClass:"formView"},[s("div",{staticClass:"form-row"},[s("b-form-fieldset",{attrs:{label:"등록일시",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.createDateTime,plaintext:"",type:"text"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"등록자",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.createId,plaintext:"",type:"text"}})],1)],1),e._v(" "),s("div",{staticClass:"form-row"},[s("b-form-fieldset",{attrs:{label:"수정일시",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.modifyDateTime,plaintext:"",type:"text"}})],1),e._v(" "),s("b-form-fieldset",{attrs:{label:"수정자",horizontal:!0}},[s("b-form-input",{attrs:{value:e.items.modifyId,plaintext:"",type:"text"}})],1)],1)])],1),e._v(" "),e.isEdit?s("div",{staticClass:"page-btn"},[s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onView}},[e._v("취소")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmit}},[e._v("저장")])],1):s("div",{staticClass:"page-btn"},[s("b-button",{staticClass:"float-left",attrs:{type:"button",variant:"outline-secondary"},on:{click:e.onDelete}},[e._v("삭제")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:e.showHistory}},[e._v("이력관리")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Scheduler 관리"}}},[e._v("목록")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onEdit}},[e._v("수정")])],1),e._v(" "),s("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:e.isModalHistory,callback:function(t){e.isModalHistory=t},expression:"isModalHistory"}},[s("section",{staticClass:"board"},[s("b-table",{attrs:{hover:"","show-empty":"",items:e.history.items,fields:e.history.fields,"current-page":e.history.pageInfo.page,"per-page":e.history.pageInfo.size},scopedSlots:e._u([{key:"scheduleHistId",fn:function(t){return[s("a",{attrs:{href:e.getHistoryLink(t.value),target:"_blank"}},[e._v("보기")])]}}])})],1),e._v(" "),s("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":e.history.pageInfo.totalCount,"per-page":e.history.pageInfo.size},model:{value:e.history.pageInfo.page,callback:function(t){e.$set(e.history.pageInfo,"page",t)},expression:"history.pageInfo.page"}}),e._v(" "),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(t){e.isModalHistory=!1}}},[e._v("확인")])],1)],1),e._v(" "),s("b-modal",{class:"modal-"+e.modal.type,attrs:{title:"Message",size:"sm"},model:{value:e.modal.open,callback:function(t){e.$set(e.modal,"open",t)},expression:"modal.open"}},[s("div",{staticClass:"d-block text-center"},[s("p",[e._v(e._s(e.modal.msg))])]),e._v(" "),s("div",{staticClass:"mx-auto",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.modal.action}},[e._v("확인")]),e._v(" "),s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(t){e.modal.open=!1}}},[e._v("취소")])],1)])],1)},a=[],o={render:i,staticRenderFns:a};t.a=o},666:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(1166),a=s(1167),o=s(15),l=o(i.a,a.a,null,null,null);t.default=l.exports}});